<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JavaScript Learning Adventure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            padding: 20px;
            overflow-x: hidden;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 700px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 32px;
            color: #f7d417;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 700;
        }
        
        .stats {
            display: flex;
            gap: 25px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            transition: transform 0.3s ease;
        }
        
        .stat-box:hover {
            transform: translateY(-3px);
        }
        
        .stat-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-top: 5px;
        }
        
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .module {
            padding: 15px 25px;
            border-left: 5px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .module:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .module.active {
            border-left: 5px solid #f7d417;
            background: rgba(255, 255, 255, 0.15);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(247, 212, 23, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(247, 212, 23, 0); }
            100% { box-shadow: 0 0 0 0 rgba(247, 212, 23, 0); }
        }
        
        .module i {
            font-size: 20px;
            color: #3498db;
        }
        
        .module h3 {
            font-size: 18px;
            font-weight: 600;
        }
        
        .module-progress {
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #2ecc71;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .module-title {
            color: #2c3e50;
            font-size: 32px;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 3px solid #1a2a6c;
        }
        
        .module-description {
            color: #34495e;
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .challenge-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .challenge-title {
            font-size: 24px;
            color: #1a2a6c;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .challenge-description {
            color: #2c3e50;
            font-size: 17px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            position: relative;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            color: #ccc;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .code-content {
            color: #d4d4d4;
            font-size: 16px;
            line-height: 1.5;
            white-space: pre-wrap;
            min-height: 150px;
            padding: 10px;
            background: #252526;
            border-radius: 5px;
            overflow: auto;
        }
        
        .code-keyword {
            color: #569cd6;
        }
        
        .code-function {
            color: #dcdcaa;
        }
        
        .code-string {
            color: #ce9178;
        }
        
        .code-comment {
            color: #6a9955;
        }
        
        .code-number {
            color: #b5cea8;
        }
        
        .code-operator {
            color: #d4d4d4;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option {
            background: #e3f2fd;
            border: 2px solid #bbdefb;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .option:hover {
            background: #bbdefb;
            transform: translateY(-3px);
        }
        
        .option.correct {
            background: #c8e6c9;
            border-color: #a5d6a7;
            animation: correctPulse 0.5s;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .option.incorrect {
            background: #ffcdd2;
            border-color: #ef9a9a;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #1a2a6c, #b21f1f);
            color: white;
            box-shadow: 0 5px 15px rgba(26, 42, 108, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(26, 42, 108, 0.6);
        }
        
        .btn-secondary {
            background: #ecf0f1;
            color: #7f8c8d;
        }
        
        .btn-secondary:hover {
            background: #dfe6e9;
        }
        
        .progress-container {
            margin-top: auto;
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .progress-bar-main {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-main {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            width: 0%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background: #e8f5e9;
            border: 2px solid #c8e6c9;
            color: #2e7d32;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            border: 2px solid #ffcdd2;
            color: #c62828;
        }
        
        .feedback-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feedback-content {
            font-size: 16px;
            line-height: 1.5;
        }
        
        .level-select-title {
            font-size: 24px;
            color: #2c3e50;
            margin: 15px 0 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .module-indicator {
            background: #1a2a6c;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 16px;
        }
        
        /* LEVEL GRID - Show all 30 levels without scroll */
        .level-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 8px;
            margin: 15px 0;
        }
        
        .level {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            font-size: 14px;
        }
        
        .level.locked {
            background: #e0e0e0;
            color: #9e9e9e;
            cursor: not-allowed;
        }
        
        .level.unlocked {
            background: #81c784;
            color: white;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        
        .level.current {
            background: #f7d417;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 10px rgba(247, 212, 23, 0.7);
            animation: pulse 2s infinite;
        }
        
        .level.completed {
            background: #4caf50;
            color: white;
        }
        
        .victory-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .victory-content {
            text-align: center;
            max-width: 600px;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .trophy {
            font-size: 100px;
            color: #f7d417;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0,0,0,0.2);
            animation: spin 1s ease;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        
        .badges-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .badge {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
        }
        
        .badge:nth-child(2) {
            animation-delay: 0.5s;
            background: linear-gradient(135deg, #f7d417, #f9e75d);
        }
        
        .badge:nth-child(3) {
            animation-delay: 1s;
            background: linear-gradient(135deg, #2ecc71, #3498db);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .console-output {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            display: none;
        }
        
        .console-header {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .run-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .run-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        .achievements-bar {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .achievement {
            background: #f7d417;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .xp-animation {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            color: #f7d417;
            animation: xpFloat 1.5s ease-out;
            pointer-events: none;
            z-index: 200;
        }
        
        @keyframes xpFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        .level-nav {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
        }
        
        @media (max-width: 900px) {
            .level-grid {
                grid-template-columns: repeat(6, 1fr);
            }
        }
        
        @media (max-width: 650px) {
            .level-grid {
                grid-template-columns: repeat(5, 1fr);
            }
        }
        
        @media (max-width: 500px) {
            .level-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .stats {
                gap: 10px;
            }
            
            .stat-box {
                min-width: 80px;
                padding: 6px 10px;
            }
        }
        
        @media (max-width: 400px) {
            .level-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                padding: 15px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .game-container {
                height: auto;
                min-height: 100vh;
            }
            
            .badges-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <div class="logo">
                <i class="fab fa-js"></i>
                <h1>JavaScript Learning Adventure</h1>
            </div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">XP</div>
                    <div class="stat-value" id="xpValue">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="scoreValue">0</div>
                </div>
            </div>
        </header>
        
        <main>
            <div class="sidebar">
                <div class="module active" data-module="basics">
                    <i class="fas fa-vial"></i>
                    <div>
                        <h3>JS Basics</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="basics-progress" style="width: 20%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="functions">
                    <i class="fas fa-code"></i>
                    <div>
                        <h3>Functions</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="functions-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="dom">
                    <i class="fas fa-window-maximize"></i>
                    <div>
                        <h3>DOM Manipulation</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="dom-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="objects">
                    <i class="fas fa-cube"></i>
                    <div>
                        <h3>Objects & Arrays</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="objects-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="advanced">
                    <i class="fas fa-cogs"></i>
                    <div>
                        <h3>Advanced JS</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="advanced-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="content-area">
                <h2 class="module-title" id="moduleTitle">JavaScript Basics</h2>
                <p class="module-description" id="moduleDescription">
                    Learn the fundamental concepts of JavaScript including variables, data types, and basic operations.
                </p>
                
                <div class="level-select-title">
                    <span>Select Level</span>
                    <span class="module-indicator" id="moduleIndicator">Module: JS Basics</span>
                </div>
                
                <!-- Level Grid - Shows all 30 levels without scrollbar -->
                <div class="level-grid" id="levelGrid">
                    <!-- All 30 levels will be displayed here -->
                </div>
                
                <div class="level-nav">
                    <button class="btn btn-secondary" id="prevModuleBtn">
                        <i class="fas fa-arrow-left"></i> Previous Module
                    </button>
                    <button class="btn btn-secondary" id="nextModuleBtn">
                        Next Module <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
                
                <div class="achievements-bar">
                    <div class="achievement">
                        <i class="fas fa-star"></i> First Steps
                    </div>
                    <div class="achievement">
                        <i class="fas fa-bolt"></i> Quick Learner
                    </div>
                    <div class="achievement">
                        <i class="fas fa-code"></i> JS Master
                    </div>
                </div>
                
                <div id="quizContainer">
                    <!-- Quiz content will be dynamically generated -->
                </div>
                
                <div class="console-output" id="consoleOutput">
                    <div class="console-header">
                        <span>JavaScript Console Output</span>
                        <span>Status: <span id="runStatus">Ready</span></span>
                    </div>
                    <pre id="outputContent"></pre>
                </div>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Course Progress</span>
                        <span id="progressPercentage">5% Complete</span>
                    </div>
                    <div class="progress-bar-main">
                        <div class="progress-main" id="mainProgress" style="width: 5%"></div>
                    </div>
                </div>
            </div>
            
            <div class="victory-screen" id="victoryScreen">
                <div class="victory-content">
                    <div class="trophy">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h1>Congratulations!</h1>
                    <p class="module-description">You've completed all 30 levels of the JavaScript Learning Adventure!</p>
                    
                    <div class="badges-container">
                        <div class="badge">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-gem"></i>
                        </div>
                    </div>
                    
                    <p class="stat-value" style="font-size: 32px; margin: 20px 0;">Final Score: <span id="finalScore">0</span></p>
                    <button class="btn btn-primary" id="restartGameBtn">
                        <i class="fas fa-redo"></i> Play Again
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game state
            const gameState = {
                currentLevel: 1,
                maxLevel: 30,
                score: 0,
                xp: 0,
                currentModule: 'basics',
                completedLevels: new Set(),
                achievements: new Set(['First Steps', 'Quick Learner'])
            };
            
            // DOM elements
            const levelGrid = document.getElementById('levelGrid');
            const quizContainer = document.getElementById('quizContainer');
            const moduleTitle = document.getElementById('moduleTitle');
            const moduleDescription = document.getElementById('moduleDescription');
            const currentLevelElement = document.getElementById('currentLevel');
            const xpValueElement = document.getElementById('xpValue');
            const scoreValueElement = document.getElementById('scoreValue');
            const mainProgress = document.getElementById('mainProgress');
            const progressPercentage = document.getElementById('progressPercentage');
            const victoryScreen = document.getElementById('victoryScreen');
            const finalScore = document.getElementById('finalScore');
            const restartGameBtn = document.getElementById('restartGameBtn');
            const consoleOutput = document.getElementById('consoleOutput');
            const outputContent = document.getElementById('outputContent');
            const runStatus = document.getElementById('runStatus');
            const moduleElements = document.querySelectorAll('.module');
            const prevModuleBtn = document.getElementById('prevModuleBtn');
            const nextModuleBtn = document.getElementById('nextModuleBtn');
            const moduleIndicator = document.getElementById('moduleIndicator');
            
            // Module configuration
            const modules = {
                basics: { 
                    title: 'JavaScript Basics', 
                    description: 'Learn the fundamental concepts of JavaScript including variables, data types, and basic operations.',
                    levels: [1, 2, 3, 4, 5, 6],
                    start: 1,
                    end: 6
                },
                functions: { 
                    title: 'Functions', 
                    description: 'Master function declarations, expressions, arrow functions, callbacks, and closures.',
                    levels: [7, 8, 9, 10, 11, 12],
                    start: 7,
                    end: 12
                },
                dom: { 
                    title: 'DOM Manipulation', 
                    description: 'Learn to select, create, and manipulate DOM elements and handle events.',
                    levels: [13, 14, 15, 16, 17, 18],
                    start: 13,
                    end: 18
                },
                objects: { 
                    title: 'Objects & Arrays', 
                    description: 'Work with objects, arrays, and learn common manipulation techniques.',
                    levels: [19, 20, 21, 22, 23, 24],
                    start: 19,
                    end: 24
                },
                advanced: { 
                    title: 'Advanced JS', 
                    description: 'Explore advanced concepts like promises, async/await, and modern JS features.',
                    levels: [25, 26, 27, 28, 29, 30],
                    start: 25,
                    end: 30
                }
            };
            
            // Questions database
            const questions = [
                // Level 1-6: JavaScript Basics
                {
                    level: 1,
                    module: 'basics',
                    question: "How do you declare a variable in JavaScript?",
                    options: [
                        "variable x;",
                        "var x;",
                        "x = variable;",
                        "declare x;"
                    ],
                    answer: 1,
                    explanation: "The 'var' keyword is used to declare variables in JavaScript (though 'let' and 'const' are preferred in modern JS).",
                    code: `// Variable declaration
var name = "John";
let age = 25;
const PI = 3.14;`,
                    output: "// Variables declared successfully"
                },
                {
                    level: 2,
                    module: 'basics',
                    question: "Which operator is used for strict equality comparison?",
                    options: [
                        "==",
                        "===",
                        "=",
                        "!=="
                    ],
                    answer: 1,
                    explanation: "The === operator checks for both value and type equality, while == performs type coercion.",
                    code: `// Equality comparison
console.log(5 == '5');   // true (type coercion)
console.log(5 === '5');  // false (different types)`,
                    output: "true\nfalse"
                },
                {
                    level: 3,
                    module: 'basics',
                    question: "What is the result of: '5' + 3 in JavaScript?",
                    options: [
                        "8",
                        "53",
                        "Error",
                        "undefined"
                    ],
                    answer: 1,
                    explanation: "The + operator performs string concatenation when one operand is a string.",
                    code: `// Type coercion example
console.log('5' + 3);      // "53"
console.log('5' - 3);      // 2 (subtraction forces number conversion)`,
                    output: "53\n2"
                },
                {
                    level: 4,
                    module: 'basics',
                    question: "Which of these is NOT a JavaScript data type?",
                    options: [
                        "boolean",
                        "number",
                        "character",
                        "symbol"
                    ],
                    answer: 2,
                    explanation: "JavaScript doesn't have a separate 'character' type - it's just a string with length 1.",
                    code: `// Data types in JavaScript
console.log(typeof true);      // "boolean"
console.log(typeof 42);        // "number"
console.log(typeof 'a');       // "string" (not character)
console.log(typeof Symbol());  // "symbol"`,
                    output: "boolean\nnumber\nstring\nsymbol"
                },
                {
                    level: 5,
                    module: 'basics',
                    question: "What does the typeof operator return for an array?",
                    options: [
                        "array",
                        "object",
                        "list",
                        "undefined"
                    ],
                    answer: 1,
                    explanation: "In JavaScript, arrays are a special type of object, so typeof returns 'object'.",
                    code: `// Checking array type
console.log(typeof [1, 2, 3]);  // "object"
console.log(Array.isArray([1, 2, 3]));  // true (better way to check)`,
                    output: "object\ntrue"
                },
                {
                    level: 6,
                    module: 'basics',
                    question: "What is the purpose of the 'use strict' directive?",
                    options: [
                        "Enables strict mode for more secure JavaScript",
                        "Strictly enforces type checking",
                        "Requires variables to be declared before use",
                        "Both 1 and 3"
                    ],
                    answer: 3,
                    explanation: "'use strict' enables strict mode which catches common coding errors and prevents unsafe actions.",
                    code: `// Strict mode example
'use strict';
x = 3.14;  // Throws an error because x is not declared`,
                    output: "ReferenceError: x is not defined"
                },
                
                // Level 7-12: Functions
                {
                    level: 7,
                    module: 'functions',
                    question: "How do you declare a function in JavaScript?",
                    options: [
                        "function myFunc() {}",
                        "myFunc = function() {}",
                        "myFunc() => {}",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "JavaScript has several ways to declare functions: function declarations, function expressions, and arrow functions.",
                    code: `// Function declarations
function greet() { return "Hello"; }

// Function expression
const greet = function() { return "Hello"; }

// Arrow function
const greet = () => "Hello";`,
                    output: "// Functions declared successfully"
                },
                {
                    level: 8,
                    module: 'functions',
                    question: "What is a callback function?",
                    options: [
                        "A function that calls another function",
                        "A function passed as an argument to another function",
                        "A function that returns another function",
                        "A function with no parameters"
                    ],
                    answer: 1,
                    explanation: "A callback is a function passed into another function as an argument to be executed later.",
                    code: `// Callback example
function process(callback) {
    console.log("Processing...");
    callback();
}

process(function() {
    console.log("Callback executed!");
});`,
                    output: "Processing...\nCallback executed!"
                },
                {
                    level: 9,
                    module: 'functions',
                    question: "What does the 'this' keyword refer to in a function?",
                    options: [
                        "The function itself",
                        "The global object",
                        "The object that owns the function",
                        "It depends on how the function is called"
                    ],
                    answer: 3,
                    explanation: "The value of 'this' depends on how a function is called (context).",
                    code: `// 'this' context
const obj = {
    name: "John",
    greet: function() {
        console.log(this.name);
    }
};

obj.greet(); // "John"`,
                    output: "John"
                },
                {
                    level: 10,
                    module: 'functions',
                    question: "What is a closure in JavaScript?",
                    options: [
                        "A function that closes the browser window",
                        "A function with access to its outer function's scope",
                        "A function that can't be called from outside",
                        "A function that returns nothing"
                    ],
                    answer: 1,
                    explanation: "A closure gives a function access to variables from an enclosing scope even after that scope has closed.",
                    code: `// Closure example
function outer() {
    let count = 0;
    return function inner() {
        return ++count;
    };
}

const counter = outer();
console.log(counter()); // 1
console.log(counter()); // 2`,
                    output: "1\n2"
                },
                {
                    level: 11,
                    module: 'functions',
                    question: "What is the main difference between let/const and var?",
                    options: [
                        "let/const are block-scoped, var is function-scoped",
                        "let/const are hoisted differently",
                        "let/const can't be redeclared",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "let/const have block scope, aren't hoisted the same way, and can't be redeclared in the same scope.",
                    code: `// var vs let
function example() {
    if (true) {
        var x = 1;  // Function-scoped
        let y = 2;   // Block-scoped
    }
    console.log(x); // 1
    console.log(y); // ReferenceError
}

example();`,
                    output: "1\nReferenceError: y is not defined"
                },
                {
                    level: 12,
                    module: 'functions',
                    question: "What is an Immediately Invoked Function Expression (IIFE)?",
                    options: [
                        "A function that runs immediately after being defined",
                        "A function that can only be called once",
                        "A function that invokes itself recursively",
                        "A function with no name"
                    ],
                    answer: 0,
                    explanation: "An IIFE is a function that runs as soon as it is defined.",
                    code: `// IIFE example
(function() {
    console.log("IIFE executed immediately!");
})();`,
                    output: "IIFE executed immediately!"
                },
                
                // Level 13-18: DOM Manipulation
                {
                    level: 13,
                    module: 'dom',
                    question: "How do you select an element by its ID in JavaScript?",
                    options: [
                        "document.querySelector('#id')",
                        "document.getElementById('id')",
                        "document.getElementsById('id')",
                        "Both 1 and 2"
                    ],
                    answer: 3,
                    explanation: "Both methods work, though getElementById is slightly faster for ID selection.",
                    code: `// Selecting elements
const el1 = document.getElementById('header');
const el2 = document.querySelector('#header');
console.log(el1 === el2); // true`,
                    output: "true"
                },
                {
                    level: 14,
                    module: 'dom',
                    question: "How do you add a click event listener to a button?",
                    options: [
                        "button.onclick = function() {}",
                        "button.addEventListener('click', function() {})",
                        "button.click(function() {})",
                        "Both 1 and 2"
                    ],
                    answer: 3,
                    explanation: "Both methods work, but addEventListener is preferred as it allows multiple listeners.",
                    code: `// Event listeners
const button = document.querySelector('button');

// Method 1
button.onclick = function() { console.log('Clicked 1!'); };

// Method 2 (preferred)
button.addEventListener('click', function() {
    console.log('Clicked 2!');
});`,
                    output: "// Both methods will work"
                },
                {
                    level: 15,
                    module: 'dom',
                    question: "How do you create a new element and add it to the DOM?",
                    options: [
                        "document.newElement('div')",
                        "document.createElement('div') then append",
                        "document.add('div')",
                        "document.write('<div></div>')"
                    ],
                    answer: 1,
                    explanation: "createElement creates a new element which you then append to the DOM.",
                    code: `// Creating and adding elements
const newDiv = document.createElement('div');
newDiv.textContent = 'Hello World';
document.body.appendChild(newDiv);`,
                    output: "// A new div with 'Hello World' appears in the DOM"
                },
                {
                    level: 16,
                    module: 'dom',
                    question: "What does event.preventDefault() do?",
                    options: [
                        "Stops the event from bubbling up",
                        "Prevents the default browser action",
                        "Cancels all event listeners",
                        "Stops JavaScript execution"
                    ],
                    answer: 1,
                    explanation: "preventDefault() stops the browser's default action for that event (like form submission).",
                    code: `// Preventing default behavior
document.querySelector('form').addEventListener('submit', function(event) {
    event.preventDefault();
    console.log("Form submission prevented");
});`,
                    output: "Form submission prevented"
                },
                {
                    level: 17,
                    module: 'dom',
                    question: "How do you change an element's CSS class with JavaScript?",
                    options: [
                        "element.setClass('new-class')",
                        "element.class = 'new-class'",
                        "element.className = 'new-class'",
                        "element.classList.add('new-class')"
                    ],
                    answer: 3,
                    explanation: "classList provides methods to add, remove, and toggle CSS classes.",
                    code: `// Managing classes
const el = document.getElementById('myElement');
el.classList.add('active');
el.classList.remove('inactive');
console.log(el.className);`,
                    output: "active"
                },
                {
                    level: 18,
                    module: 'dom',
                    question: "What is event delegation?",
                    options: [
                        "Assigning events to multiple elements",
                        "Handling events at a higher level than the target element",
                        "Delegating events to another element",
                        "Creating custom events"
                    ],
                    answer: 1,
                    explanation: "Event delegation handles events on parent elements to manage events for multiple child elements efficiently.",
                    code: `// Event delegation example
document.querySelector('ul').addEventListener('click', function(e) {
    if(e.target.tagName === 'LI') {
        console.log('List item clicked:', e.target.textContent);
    }
});`,
                    output: "// Clicked list item's content will be logged"
                },
                
                // Level 19-24: Objects & Arrays
                {
                    level: 19,
                    module: 'objects',
                    question: "How do you access an object property with a variable key?",
                    options: [
                        "obj.variableKey",
                        "obj[variableKey]",
                        "obj->variableKey",
                        "obj{'variableKey'}"
                    ],
                    answer: 1,
                    explanation: "Bracket notation allows using variables to access properties.",
                    code: `// Dynamic property access
const person = { name: 'John', age: 30 };
const key = 'name';

console.log(person[key]);  // "John"
console.log(person.key);   // undefined`,
                    output: "John\nundefined"
                },
                {
                    level: 20,
                    module: 'objects',
                    question: "What is object destructuring?",
                    options: [
                        "Breaking an object into smaller objects",
                        "Extracting properties into variables",
                        "Removing properties from an object",
                        "Converting an object to JSON"
                    ],
                    answer: 1,
                    explanation: "Destructuring allows extracting object properties into distinct variables.",
                    code: `// Object destructuring
const person = { name: 'John', age: 30 };
const { name, age } = person;
console.log(name, age);`,
                    output: "John 30"
                },
                {
                    level: 21,
                    module: 'objects',
                    question: "Which method adds one or more elements to the end of an array?",
                    options: [
                        "push()",
                        "pop()",
                        "shift()",
                        "unshift()"
                    ],
                    answer: 0,
                    explanation: "push() adds elements to the end of an array and returns the new length.",
                    code: `// Array methods
const arr = [1, 2];
console.log(arr.push(3));  // 3 (new length)
console.log(arr);          // [1, 2, 3]`,
                    output: "3\n[1, 2, 3]"
                },
                {
                    level: 22,
                    module: 'objects',
                    question: "What does the map() method do?",
                    options: [
                        "Creates a new array by transforming elements",
                        "Filters elements based on a condition",
                        "Reduces the array to a single value",
                        "Creates a map data structure"
                    ],
                    answer: 0,
                    explanation: "map() creates a new array populated with the results of calling a function on every element.",
                    code: `// Array map
const numbers = [1, 2, 3];
const doubled = numbers.map(n => n * 2);
console.log(doubled);`,
                    output: "[2, 4, 6]"
                },
                {
                    level: 23,
                    module: 'objects',
                    question: "How do you create a deep copy of an object?",
                    options: [
                        "Object.assign({}, obj)",
                        "JSON.parse(JSON.stringify(obj))",
                        "{...obj}",
                        "obj.clone()"
                    ],
                    answer: 1,
                    explanation: "JSON methods create a deep copy by serializing and deserializing the object.",
                    code: `// Deep copy
const obj = { a: 1, b: { c: 2 } };
const deepCopy = JSON.parse(JSON.stringify(obj));
deepCopy.b.c = 3;
console.log(obj.b.c); // Still 2`,
                    output: "2"
                },
                {
                    level: 24,
                    module: 'objects',
                    question: "What is the spread operator used for?",
                    options: [
                        "Expanding iterables into individual elements",
                        "Combining objects and arrays",
                        "Copying arrays and objects",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "The spread operator (...) has multiple uses including copying, combining, and expanding.",
                    code: `// Spread operator examples
const arr1 = [1, 2];
const arr2 = [3, 4];
const combined = [...arr1, ...arr2]; // [1, 2, 3, 4]

const obj1 = { a: 1 };
const obj2 = { b: 2 };
const merged = {...obj1, ...obj2}; // {a: 1, b: 2}`,
                    output: "// Combined array: [1, 2, 3, 4]\n// Merged object: {a: 1, b: 2}"
                },
                
                // Level 25-30: Advanced JS
                {
                    level: 25,
                    module: 'advanced',
                    question: "What is a JavaScript promise?",
                    options: [
                        "An object representing a future value",
                        "A guarantee that code will execute",
                        "A callback function",
                        "A type of variable"
                    ],
                    answer: 0,
                    explanation: "A promise represents the eventual completion (or failure) of an asynchronous operation.",
                    code: `// Promise example
const promise = new Promise((resolve) => {
    setTimeout(() => resolve('Done!'), 1000);
});

promise.then(result => console.log(result));`,
                    output: "Done! (after 1 second)"
                },
                {
                    level: 26,
                    module: 'advanced',
                    question: "What is async/await used for?",
                    options: [
                        "Writing asynchronous code that looks synchronous",
                        "Creating synchronous functions",
                        "Improving code performance",
                        "Defining classes"
                    ],
                    answer: 0,
                    explanation: "async/await provides a cleaner syntax for working with promises.",
                    code: `// Async/await example
async function fetchData() {
    const response = await fetch('https://api.example.com/data');
    const data = await response.json();
    return data;
}`,
                    output: "// Asynchronous data fetching"
                },
                {
                    level: 27,
                    module: 'advanced',
                    question: "What is a JavaScript generator?",
                    options: [
                        "A function that can be paused and resumed",
                        "A function that generates values",
                        "A special type of iterator",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "Generators are functions that can be exited and later re-entered with context saved across re-entrances.",
                    code: `// Generator example
function* idGenerator() {
    let id = 1;
    while(true) {
        yield id++;
    }
}

const gen = idGenerator();
console.log(gen.next().value); // 1
console.log(gen.next().value); // 2`,
                    output: "1\n2"
                },
                {
                    level: 28,
                    module: 'advanced',
                    question: "What is memoization?",
                    options: [
                        "Storing results of expensive function calls",
                        "Optimizing memory usage",
                        "A type of caching",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "Memoization is an optimization technique that stores results of expensive function calls.",
                    code: `// Memoization example
function memoize(fn) {
    const cache = {};
    return function(...args) {
        const key = JSON.stringify(args);
        if (cache[key]) return cache[key];
        return cache[key] = fn(...args);
    };
}`,
                    output: "// Returns a memoized version of the function"
                },
                {
                    level: 29,
                    module: 'advanced',
                    question: "What are JavaScript modules?",
                    options: [
                        "Reusable pieces of code",
                        "Files containing JavaScript code",
                        "A way to organize code with import/export",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "Modules help organize code into reusable, encapsulated pieces that can be imported and exported.",
                    code: `// Module example (file: math.js)
export function add(a, b) { return a + b; }

// Another file
import { add } from './math.js';
console.log(add(2, 3)); // 5`,
                    output: "5"
                },
                {
                    level: 30,
                    module: 'advanced',
                    question: "What is the purpose of a Web Worker?",
                    options: [
                        "Running scripts in background threads",
                        "Improving UI responsiveness",
                        "Performing CPU-intensive tasks",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "Web Workers allow running scripts in background threads to avoid blocking the main thread.",
                    code: `// Web Worker usage
// main.js
const worker = new Worker('worker.js');
worker.postMessage('Start work');
worker.onmessage = (e) => {
    console.log('Result:', e.data);
};

// worker.js
self.onmessage = (e) => {
    const result = doHeavyCalculation();
    self.postMessage(result);
};`,
                    output: "// Heavy calculation runs in background"
                }
            ];

            // Initialize the game
            function initGame() {
                updateStats();
                generateAllLevelButtons();
                loadLevel(gameState.currentLevel);
                setupEventListeners();
                updateProgressBars();
                updateModuleIndicator();
            }

            // Generate all 30 level buttons in a grid
            function generateAllLevelButtons() {
                levelGrid.innerHTML = '';
                
                for (let i = 1; i <= gameState.maxLevel; i++) {
                    const levelBtn = document.createElement('div');
                    levelBtn.className = 'level';
                    levelBtn.textContent = i;
                    levelBtn.dataset.level = i;
                    
                    if (gameState.completedLevels.has(i)) {
                        levelBtn.classList.add('completed');
                    } else if (i === gameState.currentLevel) {
                        levelBtn.classList.add('current');
                    } else {
                        // Check if this level is unlocked
                        const levelModule = getModuleForLevel(i);
                        const currentModuleIndex = Object.keys(modules).indexOf(gameState.currentModule);
                        const levelModuleIndex = Object.keys(modules).indexOf(levelModule);
                        
                        if (levelModuleIndex <= currentModuleIndex) {
                            levelBtn.classList.add('unlocked');
                        } else {
                            levelBtn.classList.add('locked');
                        }
                    }
                    
                    levelBtn.addEventListener('click', () => {
                        if (!levelBtn.classList.contains('locked')) {
                            gameState.currentLevel = i;
                            gameState.currentModule = getModuleForLevel(i);
                            loadLevel(i);
                            updateActiveModule();
                            updateModuleIndicator();
                        }
                    });
                    
                    levelGrid.appendChild(levelBtn);
                }
            }

            // Get module for a given level
            function getModuleForLevel(level) {
                for (const module in modules) {
                    if (modules[module].levels.includes(level)) {
                        return module;
                    }
                }
                return 'basics';
            }

            // Update active module in sidebar
            function updateActiveModule() {
                moduleElements.forEach(module => {
                    module.classList.remove('active');
                    if (module.dataset.module === gameState.currentModule) {
                        module.classList.add('active');
                    }
                });
            }

            // Update module indicator
            function updateModuleIndicator() {
                moduleIndicator.textContent = `Module: ${modules[gameState.currentModule].title}`;
            }

            // Load a specific level
            function loadLevel(levelNum) {
                const levelData = questions.find(q => q.level === levelNum);
                if (!levelData) return;
                
                // Update UI
                moduleTitle.textContent = modules[gameState.currentModule].title;
                moduleDescription.textContent = modules[gameState.currentModule].description;
                
                // Generate quiz HTML
                quizContainer.innerHTML = `
                    <div class="challenge-container">
                        <h3 class="challenge-title">
                            <i class="fas fa-puzzle-piece"></i> Level ${levelData.level}: ${levelData.question}
                        </h3>
                        <p class="challenge-description">${levelData.explanation}</p>
                        
                        ${levelData.code ? `
                        <div class="code-editor">
                            <div class="code-header">
                                <span>JavaScript Code Example</span>
                                <button class="run-btn" id="runCodeBtn">Run Code</button>
                            </div>
                            <div class="code-content">${formatCode(levelData.code)}</div>
                        </div>` : ''}
                        
                        <div class="options">
                            ${levelData.options.map((option, index) => `
                                <div class="option" data-option="${index}">${option}</div>
                            `).join('')}
                        </div>
                        
                        <div class="action-buttons">
                            <button class="btn btn-secondary" id="hintBtn">
                                <i class="fas fa-lightbulb"></i> Show Hint
                            </button>
                            <button class="btn btn-primary" id="nextLevelBtn" disabled>
                                <i class="fas fa-arrow-right"></i> Next Level
                            </button>
                        </div>
                        
                        <div class="feedback" id="feedback"></div>
                    </div>
                `;
                
                // Setup event listeners for this level
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', handleOptionClick);
                });
                
                document.getElementById('runCodeBtn')?.addEventListener('click', () => {
                    runCode(levelData);
                });
                
                document.getElementById('hintBtn')?.addEventListener('click', showHint);
                
                // Update level buttons
                generateAllLevelButtons();
                updateStats();
            }

            // Format code with syntax highlighting
            function formatCode(code) {
                const keywords = ['function', 'var', 'let', 'const', 'return', 'if', 'else', 'for', 'while', 'switch', 'case', 'break', 'class', 'new', 'this', 'typeof', 'console', 'log'];
                const functions = ['addEventListener', 'querySelector', 'getElementById', 'createElement', 'appendChild', 'setTimeout', 'fetch'];
                
                return code
                    .replace(/(".*?"|'.*?')/g, '<span class="code-string">$1</span>')
                    .replace(/\b(\d+)\b/g, '<span class="code-number">$1</span>')
                    .replace(new RegExp(`\\b(${keywords.join('|')})\\b`, 'g'), '<span class="code-keyword">$1</span>')
                    .replace(new RegExp(`\\b(${functions.join('|')})\\b`, 'g'), '<span class="code-function">$1</span>')
                    .replace(/\/\/.*/g, '<span class="code-comment">$&</span>');
            }

            // Handle option selection
            function handleOptionClick(e) {
                const selectedOption = e.target;
                const options = document.querySelectorAll('.option');
                const levelData = questions.find(q => q.level === gameState.currentLevel);
                const isCorrect = parseInt(selectedOption.dataset.option) === levelData.answer;
                
                // Disable all options
                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
                
                // Mark as correct/incorrect
                if (isCorrect) {
                    selectedOption.classList.add('correct');
                    gameState.completedLevels.add(gameState.currentLevel);
                    gameState.score += 100;
                    gameState.xp += 50;
                    
                    // Show XP animation
                    showXpAnimation(50);
                    
                    // Unlock next level if exists
                    const nextLevel = gameState.currentLevel + 1;
                    if (nextLevel <= gameState.maxLevel) {
                        const nextLevelBtn = document.querySelector(`.level[data-level="${nextLevel}"]`);
                        if (nextLevelBtn) {
                            nextLevelBtn.classList.remove('locked');
                            nextLevelBtn.classList.add('unlocked');
                        }
                    }
                } else {
                    selectedOption.classList.add('incorrect');
                    // Highlight correct answer
                    options[levelData.answer].classList.add('correct');
                }
                
                // Show feedback
                const feedback = document.getElementById('feedback');
                feedback.innerHTML = `
                    <div class="feedback ${isCorrect ? 'correct' : 'incorrect'}">
                        <h4 class="feedback-title">
                            <i class="fas ${isCorrect ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                            ${isCorrect ? 'Correct!' : 'Incorrect!'}
                        </h4>
                        <p class="feedback-content">${levelData.explanation}</p>
                    </div>
                `;
                feedback.style.display = 'block';
                
                // Enable next level button
                document.getElementById('nextLevelBtn').disabled = false;
                document.getElementById('nextLevelBtn').addEventListener('click', goToNextLevel);
                
                updateStats();
                updateProgressBars();
            }

            // Run code and show output
            function runCode(levelData) {
                runStatus.textContent = "Running...";
                consoleOutput.style.display = 'block';
                outputContent.textContent = levelData.output || "No output produced";
                runStatus.textContent = "Completed";
            }

            // Show hint
            function showHint() {
                const levelData = questions.find(q => q.level === gameState.currentLevel);
                const feedback = document.getElementById('feedback');
                feedback.innerHTML = `
                    <div class="feedback">
                        <h4 class="feedback-title">
                            <i class="fas fa-lightbulb"></i>
                            Hint
                        </h4>
                        <p class="feedback-content">${levelData.explanation}</p>
                    </div>
                `;
                feedback.style.display = 'block';
            }

            // Go to next level
            function goToNextLevel() {
                const nextLevel = gameState.currentLevel + 1;
                
                if (nextLevel <= gameState.maxLevel) {
                    gameState.currentLevel = nextLevel;
                    gameState.currentModule = getModuleForLevel(nextLevel);
                    loadLevel(nextLevel);
                    updateActiveModule();
                    updateModuleIndicator();
                } else {
                    // Check if all levels completed
                    if (gameState.completedLevels.size === gameState.maxLevel) {
                        showVictoryScreen();
                    }
                }
            }

            // Navigate to next module
            function goToNextModule() {
                const moduleOrder = ['basics', 'functions', 'dom', 'objects', 'advanced'];
                const currentIndex = moduleOrder.indexOf(gameState.currentModule);
                
                if (currentIndex < moduleOrder.length - 1) {
                    gameState.currentModule = moduleOrder[currentIndex + 1];
                    gameState.currentLevel = modules[gameState.currentModule].start;
                    loadLevel(gameState.currentLevel);
                    updateActiveModule();
                    updateModuleIndicator();
                }
            }

            // Navigate to previous module
            function goToPrevModule() {
                const moduleOrder = ['basics', 'functions', 'dom', 'objects', 'advanced'];
                const currentIndex = moduleOrder.indexOf(gameState.currentModule);
                
                if (currentIndex > 0) {
                    gameState.currentModule = moduleOrder[currentIndex - 1];
                    gameState.currentLevel = modules[gameState.currentModule].start;
                    loadLevel(gameState.currentLevel);
                    updateActiveModule();
                    updateModuleIndicator();
                }
            }

            // Show XP animation
            function showXpAnimation(amount) {
                const xpAnim = document.createElement('div');
                xpAnim.className = 'xp-animation';
                xpAnim.textContent = `+${amount} XP`;
                xpAnim.style.left = `${Math.random() * 80 + 10}%`;
                document.querySelector('.game-container').appendChild(xpAnim);
                
                setTimeout(() => {
                    xpAnim.remove();
                }, 1500);
            }

            // Update stats display
            function updateStats() {
                currentLevelElement.textContent = gameState.currentLevel;
                xpValueElement.textContent = gameState.xp;
                scoreValueElement.textContent = gameState.score;
            }

            // Update progress bars
            function updateProgressBars() {
                // Module progress
                const moduleLevels = modules[gameState.currentModule].levels;
                const completedInModule = moduleLevels.filter(level => 
                    gameState.completedLevels.has(level)
                ).length;
                
                const moduleProgress = (completedInModule / moduleLevels.length) * 100;
                document.getElementById(`${gameState.currentModule}-progress`).style.width = `${moduleProgress}%`;
                
                // Overall progress
                const overallProgress = (gameState.completedLevels.size / gameState.maxLevel) * 100;
                mainProgress.style.width = `${overallProgress}%`;
                progressPercentage.textContent = `${Math.round(overallProgress)}% Complete`;
            }

            // Show victory screen
            function showVictoryScreen() {
                finalScore.textContent = gameState.score;
                victoryScreen.style.display = 'flex';
            }

            // Setup event listeners
            function setupEventListeners() {
                // Module switching
                moduleElements.forEach(module => {
                    module.addEventListener('click', () => {
                        gameState.currentModule = module.dataset.module;
                        gameState.currentLevel = modules[gameState.currentModule].start;
                        loadLevel(gameState.currentLevel);
                        updateActiveModule();
                        updateModuleIndicator();
                    });
                });
                
                // Module navigation
                prevModuleBtn.addEventListener('click', goToPrevModule);
                nextModuleBtn.addEventListener('click', goToNextModule);
                
                // Restart game
                restartGameBtn.addEventListener('click', () => {
                    // Reset game state
                    gameState.currentLevel = 1;
                    gameState.score = 0;
                    gameState.xp = 0;
                    gameState.currentModule = 'basics';
                    gameState.completedLevels.clear();
                    
                    // Reset UI
                    victoryScreen.style.display = 'none';
                    moduleElements.forEach(m => m.classList.remove('active'));
                    document.querySelector('[data-module="basics"]').classList.add('active');
                    
                    // Reinitialize
                    initGame();
                });
            }

            // Start the game
            initGame();
        });
    </script>
</body>
</html>