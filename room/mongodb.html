<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Learning Adventure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
      <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 20px;
            overflow-x: hidden;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 700px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: linear-gradient(to right, #457fca, #5691c8);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 32px;
            color: #ffd43b;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 700;
        }
        
        .stats {
            display: flex;
            gap: 25px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            transition: transform 0.3s ease;
        }
        
        .stat-box:hover {
            transform: translateY(-3px);
        }
        
        .stat-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-top: 5px;
        }
        
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .module {
            padding: 15px 25px;
            border-left: 5px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .module:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .module.active {
            border-left: 5px solid #ffd43b;
            background: rgba(255, 255, 255, 0.15);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 212, 59, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 212, 59, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 212, 59, 0); }
        }
        
        .module i {
            font-size: 20px;
            color: #3498db;
        }
        
        .module h3 {
            font-size: 18px;
            font-weight: 600;
        }
        
        .module-progress {
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #2ecc71;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .module-title {
            color: #2c3e50;
            font-size: 32px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
        }
        
        .module-description {
            color: #34495e;
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .challenge-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .challenge-title {
            font-size: 24px;
            color: #3498db;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .challenge-description {
            color: #2c3e50;
            font-size: 17px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            position: relative;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            color: #ccc;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .code-content {
            color: #d4d4d4;
            font-size: 16px;
            line-height: 1.5;
            white-space: pre-wrap;
            min-height: 150px;
            padding: 10px;
            background: #252526;
            border-radius: 5px;
            overflow: auto;
        }
        
        .code-keyword {
            color: #569cd6;
        }
        
        .code-function {
            color: #dcdcaa;
        }
        
        .code-string {
            color: #ce9178;
        }
        
        .code-comment {
            color: #6a9955;
        }
        
        .code-number {
            color: #b5cea8;
        }
        
        .code-operator {
            color: #d4d4d4;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option {
            background: #e3f2fd;
            border: 2px solid #bbdefb;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .option:hover {
            background: #bbdefb;
            transform: translateY(-3px);
        }
        
        .option.correct {
            background: #c8e6c9;
            border-color: #a5d6a7;
            animation: correctPulse 0.5s;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .option.incorrect {
            background: #ffcdd2;
            border-color: #ef9a9a;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #3498db, #2980b9);
            color: white;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
        }
        
        .btn-secondary {
            background: #ecf0f1;
            color: #7f8c8d;
        }
        
        .btn-secondary:hover {
            background: #dfe6e9;
        }
        
        .progress-container {
            margin-top: auto;
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .progress-bar-main {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-main {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            width: 0%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background: #e8f5e9;
            border: 2px solid #c8e6c9;
            color: #2e7d32;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            border: 2px solid #ffcdd2;
            color: #c62828;
        }
        
        .feedback-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feedback-content {
            font-size: 16px;
            line-height: 1.5;
        }
        
        .level-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .level {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .level.locked {
            background: #e0e0e0;
            color: #9e9e9e;
            cursor: not-allowed;
        }
        
        .level.unlocked {
            background: #81c784;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .level.current {
            background: #ffd54f;
            color: #333;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 213, 79, 0.7);
            animation: pulse 2s infinite;
        }
        
        .level.completed {
            background: #4caf50;
            color: white;
        }
        
        .level-select-title {
            font-size: 24px;
            color: #2c3e50;
            margin: 20px 0 15px;
        }
        
        .victory-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .victory-content {
            text-align: center;
            max-width: 600px;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .trophy {
            font-size: 100px;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0,0,0,0.2);
            animation: spin 1s ease;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        
        .badges-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .badge {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #9b59b6);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
        }
        
        .badge:nth-child(2) {
            animation-delay: 0.5s;
            background: linear-gradient(135deg, #2ecc71, #3498db);
        }
        
        .badge:nth-child(3) {
            animation-delay: 1s;
            background: linear-gradient(135deg, #e74c3c, #e67e22);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .console-output {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            display: none;
        }
        
        .console-header {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .run-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .run-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        .achievements-bar {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .achievement {
            background: #f1c40f;
            color: #2c3e50;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .xp-animation {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            color: #f1c40f;
            animation: xpFloat 1.5s ease-out;
            pointer-events: none;
            z-index: 200;
        }
        
        @keyframes xpFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                padding: 15px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .stats {
                gap: 10px;
            }
            
            .stat-box {
                min-width: 80px;
                padding: 6px 10px;
            }
            
            .level {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            
            .game-container {
                height: auto;
                min-height: 100vh;
            }
            
            .badges-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <div class="logo">
                <i class="fas fa-database"></i>
                <h1>MongoDB Learning Adventure</h1>
            </div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">XP</div>
                    <div class="stat-value" id="xpValue">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="scoreValue">0</div>
                </div>
            </div>
        </header>
        
        <main>
            <div class="sidebar">
                <div class="module active" data-module="basics">
                    <i class="fas fa-vial"></i>
                    <div>
                        <h3>MongoDB Basics</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="basics-progress" style="width: 20%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="crud">
                    <i class="fas fa-edit"></i>
                    <div>
                        <h3>CRUD Operations</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="crud-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="query">
                    <i class="fas fa-search"></i>
                    <div>
                        <h3>Querying Data</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="query-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="aggregation">
                    <i class="fas fa-project-diagram"></i>
                    <div>
                        <h3>Aggregation</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="aggregation-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="advanced">
                    <i class="fas fa-cogs"></i>
                    <div>
                        <h3>Advanced Topics</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="advanced-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="content-area">
                <h2 class="module-title" id="moduleTitle">MongoDB Basics</h2>
                <p class="module-description" id="moduleDescription">
                    Learn the fundamental concepts of MongoDB including documents, collections, and databases.
                </p>
                
                <div class="level-select-title">Select Level</div>
                <div class="level-container" id="levelContainer">
                    <!-- Levels will be dynamically generated -->
                </div>
                
                <div class="achievements-bar">
                    <div class="achievement">
                        <i class="fas fa-star"></i> First Steps
                    </div>
                    <div class="achievement">
                        <i class="fas fa-bolt"></i> Quick Learner
                    </div>
                </div>
                
                <div id="quizContainer">
                    <!-- Quiz content will be dynamically generated -->
                </div>
                
                <div class="console-output" id="consoleOutput">
                    <div class="console-header">
                        <span>MongoDB Shell Output</span>
                        <span>Status: <span id="runStatus">Ready</span></span>
                    </div>
                    <pre id="outputContent"></pre>
                </div>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Course Progress</span>
                        <span id="progressPercentage">5% Complete</span>
                    </div>
                    <div class="progress-bar-main">
                        <div class="progress-main" id="mainProgress" style="width: 5%"></div>
                    </div>
                </div>
            </div>
            
            <div class="victory-screen" id="victoryScreen">
                <div class="victory-content">
                    <div class="trophy">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h1>Congratulations!</h1>
                    <p class="module-description">You've completed all 30 levels of the MongoDB Learning Adventure!</p>
                    
                    <div class="badges-container">
                        <div class="badge">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-gem"></i>
                        </div>
                    </div>
                    
                    <p class="stat-value" style="font-size: 32px; margin: 20px 0;">Final Score: <span id="finalScore">0</span></p>
                    <button class="btn btn-primary" id="restartGameBtn">
                        <i class="fas fa-redo"></i> Play Again
                    </button>
                </div>
            </div>
        </main>
    </div>
    <script>
document.addEventListener('DOMContentLoaded', function() {
        // Game state
        const gameState = {
            currentLevel: 1,
            maxLevel: 30,
            score: 0,
            xp: 0,
            currentModule: 'basics',
            completedLevels: new Set(),
            achievements: new Set(['First Steps', 'Quick Learner'])
        };
        
        // DOM elements
        const levelContainer = document.getElementById('levelContainer');
        const quizContainer = document.getElementById('quizContainer');
        const moduleTitle = document.getElementById('moduleTitle');
        const moduleDescription = document.getElementById('moduleDescription');
        const currentLevelElement = document.getElementById('currentLevel');
        const xpValueElement = document.getElementById('xpValue');
        const scoreValueElement = document.getElementById('scoreValue');
        const mainProgress = document.getElementById('mainProgress');
        const progressPercentage = document.getElementById('progressPercentage');
        const victoryScreen = document.getElementById('victoryScreen');
        const finalScore = document.getElementById('finalScore');
        const restartGameBtn = document.getElementById('restartGameBtn');
        const consoleOutput = document.getElementById('consoleOutput');
        const outputContent = document.getElementById('outputContent');
        const runStatus = document.getElementById('runStatus');

            
            // Questions database - MongoDB focused
            const questions = [
                // Level 1-5: MongoDB Basics
                {
                    level: 1,
                    module: 'basics',
                    question: "What type of database is MongoDB?",
                    options: [
                        "Relational Database",
                        "Document Database",
                        "Key-Value Store",
                        "Graph Database"
                    ],
                    answer: 1,
                    explanation: "MongoDB is a document database that stores data in flexible, JSON-like documents.",
                    code: `// MongoDB stores data as documents
{
  _id: ObjectId("5f8d..."),
  name: "MongoDB",
  type: "document database",
  features: ["flexible", "scalable", "high-performance"]
}`
                },
                {
                    level: 2,
                    module: 'basics',
                    question: "What is the basic unit of data in MongoDB?",
                    options: [
                        "Table",
                        "Row",
                        "Document",
                        "Collection"
                    ],
                    answer: 2,
                    explanation: "A document is the basic unit of data in MongoDB, similar to a row in relational databases but more flexible.",
                    code: `// Example MongoDB document
{
  _id: ObjectId("5f8d..."),
  title: "MongoDB Basics",
  author: "John Doe",
  tags: ["database", "nosql"],
  published: true
}`
                },
                {
                    level: 3,
                    module: 'basics',
                    question: "Which command starts the MongoDB shell?",
                    options: [
                        "mongo",
                        "mongod",
                        "mongos",
                        "start-mongo"
                    ],
                    answer: 0,
                    explanation: "The 'mongo' command starts the MongoDB shell which allows you to interact with MongoDB.",
                    code: `// Starting MongoDB shell
$ mongo
MongoDB shell version v4.4.0
connecting to: mongodb://127.0.0.1:27017
>`
                },
                {
                    level: 4,
                    module: 'basics',
                    question: "What is a collection in MongoDB?",
                    options: [
                        "A group of databases",
                        "A set of documents",
                        "A type of query",
                        "An index structure"
                    ],
                    answer: 1,
                    explanation: "A collection is a grouping of MongoDB documents, similar to a table in relational databases.",
                    code: `// Collections contain documents
// users collection
[
  {name: "Alice", age: 25},
  {name: "Bob", age: 30}
]`
                },
                {
                    level: 5,
                    module: 'basics',
                    question: "Which field is automatically created as the primary key in MongoDB?",
                    options: [
                        "id",
                        "_id",
                        "key",
                        "primary"
                    ],
                    answer: 1,
                    explanation: "The '_id' field is automatically added to each document as the primary key if not specified.",
                    code: `// Document with _id field
{
  _id: ObjectId("5f8d04b4b54764421b715c3a"),
  name: "Example",
  value: 42
}`
                },
                
                // Level 6-10: CRUD Operations
                {
                    level: 6,
                    module: 'crud',
                    question: "Which method inserts a single document into a collection?",
                    options: [
                        "insert()",
                        "insertOne()",
                        "add()",
                        "create()"
                    ],
                    answer: 1,
                    explanation: "insertOne() inserts a single document into a collection.",
                    code: `// Inserting a document
db.users.insertOne({
  name: "Alice",
  age: 28,
  email: "alice@example.com"
})`
                },
                {
                    level: 7,
                    module: 'crud',
                    question: "How do you update a document in MongoDB?",
                    options: [
                        "db.collection.modify()",
                        "db.collection.update()",
                        "db.collection.updateOne()",
                        "db.collection.change()"
                    ],
                    answer: 2,
                    explanation: "updateOne() updates a single document in the collection.",
                    code: `// Updating a document
db.users.updateOne(
  { name: "Alice" },
  { $set: { age: 29 } }
)`
                },
                {
                    level: 8,
                    module: 'crud',
                    question: "Which operator is used to increment a field value?",
                    options: [
                        "$add",
                        "$increase",
                        "$inc",
                        "$plus"
                    ],
                    answer: 2,
                    explanation: "The $inc operator increments a field by a specified value.",
                    code: `// Incrementing a value
db.products.updateOne(
  { _id: 1 },
  { $inc: { quantity: -2 } }
)`
                },
                {
                    level: 9,
                    module: 'crud',
                    question: "How do you delete all documents matching a condition?",
                    options: [
                        "db.collection.remove()",
                        "db.collection.delete()",
                        "db.collection.deleteMany()",
                        "db.collection.drop()"
                    ],
                    answer: 2,
                    explanation: "deleteMany() removes all documents that match the specified filter.",
                    code: `// Deleting multiple documents
db.orders.deleteMany(
  { status: "cancelled" }
)`
                },
                {
                    level: 10,
                    module: 'crud',
                    question: "What does the upsert option do?",
                    options: [
                        "Updates the server configuration",
                        "Creates a new document if no match is found",
                        "Updates multiple documents at once",
                        "Encrypts the document before saving"
                    ],
                    answer: 1,
                    explanation: "Upsert option creates a new document when no document matches the query criteria.",
                    code: `// Using upsert
db.products.updateOne(
  { name: "Laptop" },
  { $set: { price: 999 } },
  { upsert: true }
)`
                },
                
                // Level 11-15: Querying Data
                {
                    level: 11,
                    module: 'query',
                    question: "How do you find all documents in a collection?",
                    options: [
                        "db.collection.getAll()",
                        "db.collection.find({})",
                        "db.collection.find()",
                        "db.collection.find(all)"
                    ],
                    answer: 2,
                    explanation: "find() with no arguments or an empty query document returns all documents.",
                    code: `// Find all documents
db.users.find()

// Equivalent to:
db.users.find({})`
                },
                {
                    level: 12,
                    module: 'query',
                    question: "Which operator performs a logical AND?",
                    options: [
                        "$and",
                        "$or",
                        "$not",
                        "$all"
                    ],
                    answer: 0,
                    explanation: "The $and operator performs a logical AND operation on an array of expressions.",
                    code: `// Using $and operator
db.users.find({
  $and: [
    { age: { $gt: 21 } },
    { age: { $lt: 30 } }
  ]
})`
                },
                {
                    level: 13,
                    module: 'query',
                    question: "How do you query for documents where age is greater than 25?",
                    options: [
                        "db.users.find({ age > 25 })",
                        "db.users.find({ age: { $gt: 25 } })",
                        "db.users.find({ age: { $more: 25 } })",
                        "db.users.find({ age.greater(25) })"
                    ],
                    answer: 1,
                    explanation: "The $gt operator selects documents where the field value is greater than the specified value.",
                    code: `// Find users older than 25
db.users.find({ age: { $gt: 25 } })`
                },
                {
                    level: 14,
                    module: 'query',
                    question: "Which operator checks if a field exists?",
                    options: [
                        "$has",
                        "$exists",
                        "$present",
                        "$notnull"
                    ],
                    answer: 1,
                    explanation: "The $exists operator matches documents that have the specified field.",
                    code: `// Find documents with email field
db.users.find({ email: { $exists: true } })`
                },
                {
                    level: 15,
                    module: 'query',
                    question: "How do you limit the number of returned documents?",
                    options: [
                        "db.collection.find().count(5)",
                        "db.collection.find().top(5)",
                        "db.collection.find().limit(5)",
                        "db.collection.find().first(5)"
                    ],
                    answer: 2,
                    explanation: "The limit() method limits the number of documents returned.",
                    code: `// Limit results to 5 documents
db.users.find().limit(5)`
                },
                
                // Level 16-20: Aggregation
                {
                    level: 16,
                    module: 'aggregation',
                    question: "What is the purpose of the aggregation pipeline?",
                    options: [
                        "To perform batch operations",
                        "To process data records and return computed results",
                        "To optimize database performance",
                        "To create database backups"
                    ],
                    answer: 1,
                    explanation: "The aggregation pipeline processes data through multiple stages to transform and analyze data.",
                    code: `// Basic aggregation pipeline
db.orders.aggregate([
  { $match: { status: "completed" } },
  { $group: { _id: "$customer", total: { $sum: "$amount" } } }
])`
                },
                {
                    level: 17,
                    module: 'aggregation',
                    question: "Which stage filters documents?",
                    options: [
                        "$filter",
                        "$where",
                        "$match",
                        "$search"
                    ],
                    answer: 2,
                    explanation: "The $match stage filters documents to pass only matching documents to the next stage.",
                    code: `// $match stage example
db.products.aggregate([
  { $match: { category: "electronics" } }
])`
                },
                {
                    level: 18,
                    module: 'aggregation',
                    question: "What does the $group stage do?",
                    options: [
                        "Groups documents by a specified identifier",
                        "Creates document clusters",
                        "Organizes collections",
                        "Combines multiple collections"
                    ],
                    answer: 0,
                    explanation: "The $group stage groups documents by a specified identifier expression and applies accumulator expressions.",
                    code: `// $group stage example
db.sales.aggregate([
  { $group: { _id: "$product", total: { $sum: "$quantity" } } }
])`
                },
                {
                    level: 19,
                    module: 'aggregation',
                    question: "Which operator calculates the average?",
                    options: [
                        "$mean",
                        "$average",
                        "$avg",
                        "$calc"
                    ],
                    answer: 2,
                    explanation: "The $avg operator calculates the average of numeric values.",
                    code: `// Calculating average
db.students.aggregate([
  { $group: { _id: "$class", avgScore: { $avg: "$score" } } }
])`
                },
                {
                    level: 20,
                    module: 'aggregation',
                    question: "What does the $project stage do?",
                    options: [
                        "Creates new collections",
                        "Selects specific fields to include/exclude",
                        "Plans query execution",
                        "Builds indexes"
                    ],
                    answer: 1,
                    explanation: "The $project stage passes along documents with only the specified fields.",
                    code: `// $project stage example
db.users.aggregate([
  { $project: { name: 1, email: 1, _id: 0 } }
])`
                },
                
                // Level 21-25: Advanced Topics
                {
                    level: 21,
                    module: 'advanced',
                    question: "What is sharding in MongoDB?",
                    options: [
                        "A backup strategy",
                        "A method for horizontal scaling",
                        "A type of index",
                        "A security feature"
                    ],
                    answer: 1,
                    explanation: "Sharding is a method for distributing data across multiple machines to support horizontal scaling.",
                    code: `// Enabling sharding
sh.enableSharding("mydatabase")
sh.shardCollection("mydatabase.mycollection", { "shardKey": 1 })`
                },
                {
                    level: 22,
                    module: 'advanced',
                    question: "Which index type supports text search?",
                    options: [
                        "Single field index",
                        "Compound index",
                        "Text index",
                        "Hashed index"
                    ],
                    answer: 2,
                    explanation: "Text indexes support text search queries on string content.",
                    code: `// Creating a text index
db.articles.createIndex({ content: "text" })`
                },
                {
                    level: 23,
                    module: 'advanced',
                    question: "What is the purpose of transactions in MongoDB?",
                    options: [
                        "To group multiple operations into a single atomic unit",
                        "To improve query performance",
                        "To create database snapshots",
                        "To manage user permissions"
                    ],
                    answer: 0,
                    explanation: "Transactions allow multiple operations to be executed as a single atomic unit.",
                    code: `// Using a transaction
const session = db.getMongo().startSession();
session.startTransaction();
try {
  db.accounts.updateOne({ _id: 1 }, { $inc: { balance: -100 } }, { session });
  db.accounts.updateOne({ _id: 2 }, { $inc: { balance: 100 } }, { session });
  session.commitTransaction();
} catch (error) {
  session.abortTransaction();
}`
                },
                {
                    level: 24,
                    module: 'advanced',
                    question: "Which command creates a backup of a MongoDB database?",
                    options: [
                        "mongodump",
                        "mongobackup",
                        "mongosave",
                        "mongoexport"
                    ],
                    answer: 0,
                    explanation: "mongodump is a utility for creating a binary export of a database's contents.",
                    code: `// Creating a backup
$ mongodump --db mydatabase --out /backups/`
                },
                {
                    level: 25,
                    module: 'advanced',
                    question: "What is the role of a replica set in MongoDB?",
                    options: [
                        "To improve query performance",
                        "To provide high availability",
                        "To encrypt data",
                        "To manage shards"
                    ],
                    answer: 1,
                    explanation: "A replica set provides redundancy and high availability by maintaining multiple copies of data.",
                    code: `// Replica set configuration
{
  _id: "rs0",
  members: [
    { _id: 0, host: "mongodb0.example.net:27017" },
    { _id: 1, host: "mongodb1.example.net:27017" },
    { _id: 2, host: "mongodb2.example.net:27017" }
  ]
}`
                },
                
               // Level 26-30: More Advanced Topics
            {
                level: 26,
                module: 'advanced',
                question: "Which operator is used for array element matching?",
                options: [
                    "$match",
                    "$elemMatch",
                    "$arrayMatch",
                    "$find"
                ],
                answer: 1,
                explanation: "The $elemMatch operator matches documents that contain an array field with at least one element matching all specified criteria.",
                code: `// Using $elemMatch
db.students.find({
  scores: { $elemMatch: { type: "exam", score: { $gt: 90 } } }
})`
            },
            {
                level: 27,
                module: 'advanced',
                question: "What does the $lookup stage do?",
                options: [
                    "Performs a left outer join",
                    "Searches for text",
                    "Looks up index information",
                    "Checks document validity"
                ],
                answer: 0,
                explanation: "The $lookup stage performs a left outer join to another collection, similar to SQL joins.",
                code: `// Using $lookup for joining collections
db.orders.aggregate([
  {
    $lookup: {
      from: "customers",
      localField: "customer_id",
      foreignField: "_id",
      as: "customer_info"
    }
  }
])`
            },
            {
                level: 28,
                module: 'advanced',
                question: "What is the purpose of the $graphLookup stage?",
                options: [
                    "To visualize query results",
                    "To perform recursive searches on hierarchical data",
                    "To create graph indexes",
                    "To map collection relationships"
                ],
                answer: 1,
                explanation: "$graphLookup performs a recursive search on a collection, useful for hierarchical or graph data.",
                code: `// Using $graphLookup for organizational hierarchy
db.employees.aggregate([
  {
    $graphLookup: {
      from: "employees",
      startWith: "$reportsTo",
      connectFromField: "reportsTo",
      connectToField: "_id",
      as: "managers"
    }
  }
])`
            },
            {
                level: 29,
                module: 'advanced',
                question: "Which command is used to create a time-series collection?",
                options: [
                    "db.createTimeSeries()",
                    "db.createCollection() with timeseries options",
                    "db.makeTimeSeries()",
                    "db.newTimeSeries()"
                ],
                answer: 1,
                explanation: "Time-series collections are created using createCollection with timeseries options (MongoDB 5.0+).",
                code: `// Creating a time-series collection
db.createCollection("weather", {
  timeseries: {
    timeField: "timestamp",
    metaField: "sensorId",
    granularity: "hours"
  }
})`
            },
            {
                level: 30,
                module: 'advanced',
                question: "What is the purpose of change streams in MongoDB?",
                options: [
                    "To monitor real-time data changes",
                    "To change database settings",
                    "To stream data to external systems",
                    "To modify query execution paths"
                ],
                answer: 0,
                explanation: "Change streams allow applications to access real-time data changes without polling.",
                code: `// Using change streams
const changeStream = db.collection.watch();
changeStream.on("change", (change) => {
  console.log("Change occurred:", change);
});`
            }
        ];


        // Initialize game
        function initGame() {
            updateGameState();
            renderLevelSelect();
            loadLevel(gameState.currentLevel);
        }

        // Update game state display
        function updateGameState() {
            currentLevelElement.textContent = gameState.currentLevel;
            xpValueElement.textContent = gameState.xp;
            scoreValueElement.textContent = gameState.score;
            
            // Update progress
            const progress = (gameState.currentLevel / gameState.maxLevel) * 100;
            mainProgress.style.width = `${progress}%`;
            progressPercentage.textContent = `${Math.round(progress)}%`;
            
            // Update module info
            const moduleInfo = getModuleInfo(gameState.currentModule);
            moduleTitle.textContent = moduleInfo.title;
            moduleDescription.textContent = moduleInfo.description;
        }

        // Get module information
        function getModuleInfo(module) {
            const modules = {
                basics: {
                    title: "MongoDB Basics",
                    description: "Learn fundamental concepts of MongoDB including documents, collections, and basic operations."
                },
                crud: {
                    title: "CRUD Operations",
                    description: "Master Create, Read, Update, and Delete operations in MongoDB."
                },
                query: {
                    title: "Querying Data",
                    description: "Learn how to query and filter documents with various operators."
                },
                aggregation: {
                    title: "Aggregation Framework",
                    description: "Understand the powerful aggregation pipeline for data processing."
                },
                advanced: {
                    title: "Advanced Topics",
                    description: "Explore advanced MongoDB features like indexing, transactions, and scaling."
                }
            };
            return modules[module];
        }

        // Render level select
        function renderLevelSelect() {
            levelContainer.innerHTML = '';
            for (let i = 1; i <= gameState.maxLevel; i++) {
                const levelBtn = document.createElement('div');
                levelBtn.className = 'level';
                
                // Set level status classes
                if (gameState.completedLevels.has(i)) {
                    levelBtn.classList.add('completed');
                } else if (i === gameState.currentLevel) {
                    levelBtn.classList.add('current');
                } else {
                    levelBtn.classList.add('locked');
                }
                
                levelBtn.textContent = i;
                levelBtn.addEventListener('click', () => {
                    if (gameState.completedLevels.has(i) || i === gameState.currentLevel) {
                        gameState.currentLevel = i;
                        loadLevel(i);
                        renderLevelSelect();
                    }
                });
                levelContainer.appendChild(levelBtn);
            }
        }

        // Load a level
        function loadLevel(level) {
            const question = questions.find(q => q.level === level);
            if (!question) return;
            
            gameState.currentModule = question.module;
            updateGameState();
            
            quizContainer.innerHTML = `
                <div class="challenge-container">
                    <div class="challenge-title">
                        <i class="fas fa-puzzle-piece"></i>
                        Level ${level} Challenge
                    </div>
                    <div class="challenge-description">
                        ${question.question}
                    </div>
                    
                    <div class="options">
                        ${question.options.map((opt, i) => `
                            <div class="option" data-answer="${i}">${opt}</div>
                        `).join('')}
                    </div>
                    
                    <div class="code-editor">
                        <div class="code-header">
                            <span>MongoDB Example</span>
                            <span><i class="fas fa-code"></i> JavaScript</span>
                        </div>
                        <div class="code-content">${highlightCode(question.code)}</div>
                    </div>
                    
                    <div class="feedback" id="feedback">
                        <div class="feedback-title">
                            <i class="fas fa-info-circle"></i>
                            Explanation
                        </div>
                        <div class="feedback-content">
                            ${question.explanation}
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listeners to options
            document.querySelectorAll('.option').forEach(btn => {
                btn.addEventListener('click', function() {
                    checkAnswer(parseInt(this.dataset.answer), question.answer, question);
                });
            });
        }

        // Simple code highlighter
        function highlightCode(code) {
            return code
                .replace(/(\bdb\.[a-zA-Z0-9_]+)/g, '<span class="code-function">$1</span>')
                .replace(/(\$\w+)/g, '<span class="code-keyword">$1</span>')
                .replace(/(\{|\}|\(|\)|\[|\])/g, '<span class="code-operator">$1</span>')
                .replace(/(".*?"|'.*?')/g, '<span class="code-string">$1</span>')
                .replace(/(\/\/.*)/g, '<span class="code-comment">$1</span>')
                .replace(/\b(\d+)\b/g, '<span class="code-number">$1</span>');
        }

        // Check answer
        function checkAnswer(selected, correct, question) {
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            
            options.forEach(opt => {
                opt.style.pointerEvents = 'none';
                if (parseInt(opt.dataset.answer) === correct) {
                    opt.classList.add('correct');
                } else if (parseInt(opt.dataset.answer) === selected && selected !== correct) {
                    opt.classList.add('incorrect');
                }
            });
            
            feedback.style.display = 'block';
            feedback.classList.add(selected === correct ? 'correct' : 'incorrect');
            
            // Update game state
            if (selected === correct) {
                gameState.score += 10;
                gameState.xp += 5;
                gameState.completedLevels.add(gameState.currentLevel);
                runStatus.textContent = " Correct!";
                
                // Move to next level if not at max
                if (gameState.currentLevel < gameState.maxLevel) {
                    setTimeout(() => {
                        gameState.currentLevel++;
                        loadLevel(gameState.currentLevel);
                        renderLevelSelect();
                    }, 1500);
                } else {
                    setTimeout(showVictoryScreen, 1500);
                }
            } else {
                runStatus.textContent = " Incorrect!";
            }
            
            updateGameState();
        }

        // Show victory screen
        function showVictoryScreen() {
            finalScore.textContent = gameState.score;
            victoryScreen.style.display = 'flex';
        }

        // Restart game
        restartGameBtn.addEventListener('click', function() {
            gameState.currentLevel = 1;
            gameState.score = 0;
            gameState.xp = 0;
            gameState.completedLevels = new Set();
            victoryScreen.style.display = 'none';
            initGame();
        });

        // Initialize the game
        initGame();
    });

</script>
</body>
</html>