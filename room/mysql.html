<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL Learning Adventure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #00758f, #f29111);
            padding: 20px;
            overflow-x: hidden;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 700px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: linear-gradient(to right, #00758f, #0099b6);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 32px;
            color: #f29111;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 700;
        }
        
        .stats {
            display: flex;
            gap: 25px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            transition: transform 0.3s ease;
        }
        
        .stat-box:hover {
            transform: translateY(-3px);
        }
        
        .stat-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-top: 5px;
        }
        
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .module {
            padding: 15px 25px;
            border-left: 5px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .module:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .module.active {
            border-left: 5px solid #f29111;
            background: rgba(255, 255, 255, 0.15);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(242, 145, 17, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(242, 145, 17, 0); }
            100% { box-shadow: 0 0 0 0 rgba(242, 145, 17, 0); }
        }
        
        .module i {
            font-size: 20px;
            color: #3498db;
        }
        
        .module h3 {
            font-size: 18px;
            font-weight: 600;
        }
        
        .module-progress {
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #2ecc71;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .module-title {
            color: #2c3e50;
            font-size: 32px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #00758f;
        }
        
        .module-description {
            color: #34495e;
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .challenge-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .challenge-title {
            font-size: 24px;
            color: #00758f;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .challenge-description {
            color: #2c3e50;
            font-size: 17px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            position: relative;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            color: #ccc;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .code-content {
            color: #d4d4d4;
            font-size: 16px;
            line-height: 1.5;
            white-space: pre-wrap;
            min-height: 150px;
            padding: 10px;
            background: #252526;
            border-radius: 5px;
            overflow: auto;
        }
        
        .code-keyword {
            color: #569cd6;
        }
        
        .code-function {
            color: #dcdcaa;
        }
        
        .code-string {
            color: #ce9178;
        }
        
        .code-comment {
            color: #6a9955;
        }
        
        .code-number {
            color: #b5cea8;
        }
        
        .code-operator {
            color: #d4d4d4;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option {
            background: #e3f2fd;
            border: 2px solid #bbdefb;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .option:hover {
            background: #bbdefb;
            transform: translateY(-3px);
        }
        
        .option.correct {
            background: #c8e6c9;
            border-color: #a5d6a7;
            animation: correctPulse 0.5s;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .option.incorrect {
            background: #ffcdd2;
            border-color: #ef9a9a;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #00758f, #0099b6);
            color: white;
            box-shadow: 0 5px 15px rgba(0, 117, 143, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 117, 143, 0.6);
        }
        
        .btn-secondary {
            background: #ecf0f1;
            color: #7f8c8d;
        }
        
        .btn-secondary:hover {
            background: #dfe6e9;
        }
        
        .progress-container {
            margin-top: auto;
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .progress-bar-main {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-main {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            width: 0%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background: #e8f5e9;
            border: 2px solid #c8e6c9;
            color: #2e7d32;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            border: 2px solid #ffcdd2;
            color: #c62828;
        }
        
        .feedback-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feedback-content {
            font-size: 16px;
            line-height: 1.5;
        }
        
        .level-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .level {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .level.locked {
            background: #e0e0e0;
            color: #9e9e9e;
            cursor: not-allowed;
        }
        
        .level.unlocked {
            background: #81c784;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .level.current {
            background: #f29111;
            color: white;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(242, 145, 17, 0.7);
            animation: pulse 2s infinite;
        }
        
        .level.completed {
            background: #4caf50;
            color: white;
        }
        
        .level-select-title {
            font-size: 24px;
            color: #2c3e50;
            margin: 20px 0 15px;
        }
        
        .victory-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .victory-content {
            text-align: center;
            max-width: 600px;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .trophy {
            font-size: 100px;
            color: #f29111;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0,0,0,0.2);
            animation: spin 1s ease;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        
        .badges-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .badge {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00758f, #0099b6);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
        }
        
        .badge:nth-child(2) {
            animation-delay: 0.5s;
            background: linear-gradient(135deg, #f29111, #f9b75d);
        }
        
        .badge:nth-child(3) {
            animation-delay: 1s;
            background: linear-gradient(135deg, #2ecc71, #3498db);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .console-output {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            display: none;
        }
        
        .console-header {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .run-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .run-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        .achievements-bar {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .achievement {
            background: #f29111;
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .xp-animation {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            color: #f29111;
            animation: xpFloat 1.5s ease-out;
            pointer-events: none;
            z-index: 200;
        }
        
        @keyframes xpFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                padding: 15px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .stats {
                gap: 10px;
            }
            
            .stat-box {
                min-width: 80px;
                padding: 6px 10px;
            }
            
            .level {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            
            .game-container {
                height: auto;
                min-height: 100vh;
            }
            
            .badges-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <div class="logo">
                <i class="fas fa-database"></i>
                <h1>MySQL Learning Adventure</h1>
            </div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">XP</div>
                    <div class="stat-value" id="xpValue">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="scoreValue">0</div>
                </div>
            </div>
        </header>
        
        <main>
            <div class="sidebar">
                <div class="module active" data-module="basics">
                    <i class="fas fa-vial"></i>
                    <div>
                        <h3>SQL Basics</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="basics-progress" style="width: 20%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="crud">
                    <i class="fas fa-edit"></i>
                    <div>
                        <h3>CRUD Operations</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="crud-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="query">
                    <i class="fas fa-search"></i>
                    <div>
                        <h3>Querying Data</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="query-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="joins">
                    <i class="fas fa-project-diagram"></i>
                    <div>
                        <h3>Joins & Relationships</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="joins-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="advanced">
                    <i class="fas fa-cogs"></i>
                    <div>
                        <h3>Advanced Topics</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="advanced-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="content-area">
                <h2 class="module-title" id="moduleTitle">SQL Basics</h2>
                <p class="module-description" id="moduleDescription">
                    Learn the fundamental concepts of SQL including databases, tables, and basic queries.
                </p>
                
                <div class="level-select-title">Select Level</div>
                <div class="level-container" id="levelContainer">
                    <!-- Levels will be dynamically generated -->
                </div>
                
                <div class="achievements-bar">
                    <div class="achievement">
                        <i class="fas fa-star"></i> First Steps
                    </div>
                    <div class="achievement">
                        <i class="fas fa-bolt"></i> Quick Learner
                    </div>
                </div>
                
                <div id="quizContainer">
                    <!-- Quiz content will be dynamically generated -->
                </div>
                
                <div class="console-output" id="consoleOutput">
                    <div class="console-header">
                        <span>MySQL Query Output</span>
                        <span>Status: <span id="runStatus">Ready</span></span>
                    </div>
                    <pre id="outputContent"></pre>
                </div>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Course Progress</span>
                        <span id="progressPercentage">5% Complete</span>
                    </div>
                    <div class="progress-bar-main">
                        <div class="progress-main" id="mainProgress" style="width: 5%"></div>
                    </div>
                </div>
            </div>
            
            <div class="victory-screen" id="victoryScreen">
                <div class="victory-content">
                    <div class="trophy">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h1>Congratulations!</h1>
                    <p class="module-description">You've completed all 30 levels of the MySQL Learning Adventure!</p>
                    
                    <div class="badges-container">
                        <div class="badge">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-gem"></i>
                        </div>
                    </div>
                    
                    <p class="stat-value" style="font-size: 32px; margin: 20px 0;">Final Score: <span id="finalScore">0</span></p>
                    <button class="btn btn-primary" id="restartGameBtn">
                        <i class="fas fa-redo"></i> Play Again
                    </button>
                </div>
            </div>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game state
            const gameState = {
                currentLevel: 1,
                maxLevel: 30,
                score: 0,
                xp: 0,
                currentModule: 'basics',
                completedLevels: new Set(),
                achievements: new Set(['First Steps', 'Quick Learner'])
            };
            
            // DOM elements
            const levelContainer = document.getElementById('levelContainer');
            const quizContainer = document.getElementById('quizContainer');
            const moduleTitle = document.getElementById('moduleTitle');
            const moduleDescription = document.getElementById('moduleDescription');
            const currentLevelElement = document.getElementById('currentLevel');
            const xpValueElement = document.getElementById('xpValue');
            const scoreValueElement = document.getElementById('scoreValue');
            const mainProgress = document.getElementById('mainProgress');
            const progressPercentage = document.getElementById('progressPercentage');
            const victoryScreen = document.getElementById('victoryScreen');
            const finalScore = document.getElementById('finalScore');
            const restartGameBtn = document.getElementById('restartGameBtn');
            const consoleOutput = document.getElementById('consoleOutput');
            const outputContent = document.getElementById('outputContent');
            const runStatus = document.getElementById('runStatus');
            
            // Questions database - MySQL focused
            const questions = [
                // Level 1-5: SQL Basics
                {
                    level: 1,
                    module: 'basics',
                    question: "What is the purpose of SQL?",
                    options: [
                        "To style web pages",
                        "To define the structure of databases and manipulate data",
                        "To create interactive websites",
                        "To manage computer hardware"
                    ],
                    answer: 1,
                    explanation: "SQL (Structured Query Language) is designed for managing and manipulating relational databases.",
                    code: `-- SQL is used to interact with databases
SELECT * FROM users;`
                },
                {
                    level: 2,
                    module: 'basics',
                    question: "Which SQL statement is used to retrieve data from a database?",
                    options: [
                        "GET",
                        "RETRIEVE",
                        "SELECT",
                        "QUERY"
                    ],
                    answer: 2,
                    explanation: "The SELECT statement is used to query and retrieve data from a database.",
                    code: `-- Basic SELECT statement
SELECT first_name, last_name FROM employees;`
                },
                {
                    level: 3,
                    module: 'basics',
                    question: "What is a primary key in a database table?",
                    options: [
                        "A key that opens the database",
                        "A unique identifier for each record in a table",
                        "The first column in a table",
                        "A password for database access"
                    ],
                    answer: 1,
                    explanation: "A primary key uniquely identifies each record in a table and cannot contain NULL values.",
                    code: `-- Creating a table with primary key
CREATE TABLE users (
    id INT PRIMARY KEY,
    username VARCHAR(50),
    email VARCHAR(100)
);`
                },
                {
                    level: 4,
                    module: 'basics',
                    question: "Which SQL clause is used to filter records?",
                    options: [
                        "FILTER BY",
                        "WHERE",
                        "HAVING",
                        "CONDITION"
                    ],
                    answer: 1,
                    explanation: "The WHERE clause is used to filter records based on specified conditions.",
                    code: `-- Using WHERE to filter records
SELECT * FROM products 
WHERE price > 50;`
                },
                {
                    level: 5,
                    module: 'basics',
                    question: "What does the INSERT statement do?",
                    options: [
                        "Updates existing records",
                        "Deletes records from a table",
                        "Adds new records to a table",
                        "Creates a new database"
                    ],
                    answer: 2,
                    explanation: "The INSERT statement adds new records (rows) to a database table.",
                    code: `-- Inserting a new record
INSERT INTO customers (name, email)
VALUES ('John Doe', 'john@example.com');`
                },
                
                // Level 6-10: CRUD Operations
                {
                    level: 6,
                    module: 'crud',
                    question: "Which SQL statement is used to update existing records?",
                    options: [
                        "MODIFY",
                        "CHANGE",
                        "UPDATE",
                        "ALTER"
                    ],
                    answer: 2,
                    explanation: "The UPDATE statement modifies existing records in a table.",
                    code: `-- Updating a record
UPDATE employees 
SET salary = 60000 
WHERE id = 101;`
                },
                {
                    level: 7,
                    module: 'crud',
                    question: "How do you delete records from a table?",
                    options: [
                        "REMOVE",
                        "ERASE",
                        "DELETE",
                        "DROP"
                    ],
                    answer: 2,
                    explanation: "The DELETE statement removes records from a table.",
                    code: `-- Deleting records
DELETE FROM orders 
WHERE status = 'cancelled';`
                },
                {
                    level: 8,
                    module: 'crud',
                    question: "Which statement creates a new table?",
                    options: [
                        "CREATE TABLE",
                        "MAKE TABLE",
                        "NEW TABLE",
                        "DEFINE TABLE"
                    ],
                    answer: 0,
                    explanation: "CREATE TABLE defines a new table and its columns.",
                    code: `-- Creating a new table
CREATE TABLE products (
    id INT PRIMARY KEY,
    name VARCHAR(100),
    price DECIMAL(10,2)
);`
                },
                {
                    level: 9,
                    module: 'crud',
                    question: "How do you add a new column to an existing table?",
                    options: [
                        "ADD COLUMN",
                        "INSERT COLUMN",
                        "ALTER TABLE ADD",
                        "MODIFY TABLE ADD"
                    ],
                    answer: 2,
                    explanation: "The ALTER TABLE statement with ADD COLUMN adds a new column to a table.",
                    code: `-- Adding a new column
ALTER TABLE employees
ADD COLUMN hire_date DATE;`
                },
                {
                    level: 10,
                    module: 'crud',
                    question: "What does the TRUNCATE statement do?",
                    options: [
                        "Deletes specific records",
                        "Removes all records from a table",
                        "Deletes the table structure",
                        "Shortens column names"
                    ],
                    answer: 1,
                    explanation: "TRUNCATE TABLE removes all records from a table but keeps the table structure.",
                    code: `-- Truncating a table
TRUNCATE TABLE temp_data;`
                },
                
                // Level 11-15: Querying Data
                {
                    level: 11,
                    module: 'query',
                    question: "Which clause is used to sort query results?",
                    options: [
                        "ARRANGE BY",
                        "SORT",
                        "ORDER BY",
                        "GROUP BY"
                    ],
                    answer: 2,
                    explanation: "ORDER BY sorts the result set in ascending or descending order.",
                    code: `-- Sorting results
SELECT * FROM products
ORDER BY price DESC;`
                },
                {
                    level: 12,
                    module: 'query',
                    question: "What does the GROUP BY clause do?",
                    options: [
                        "Groups similar records together",
                        "Organizes tables in the database",
                        "Combines multiple queries",
                        "Filters grouped records"
                    ],
                    answer: 0,
                    explanation: "GROUP BY groups rows that have the same values into summary rows.",
                    code: `-- Grouping data
SELECT department, COUNT(*) 
FROM employees
GROUP BY department;`
                },
                {
                    level: 13,
                    module: 'query',
                    question: "Which function calculates the average value?",
                    options: [
                        "MEDIAN()",
                        "MEAN()",
                        "AVG()",
                        "AVERAGE()"
                    ],
                    answer: 2,
                    explanation: "The AVG() function returns the average value of a numeric column.",
                    code: `-- Calculating average
SELECT AVG(salary) 
FROM employees;`
                },
                {
                    level: 14,
                    module: 'query',
                    question: "How do you select unique values?",
                    options: [
                        "UNIQUE",
                        "DISTINCT",
                        "DIFFERENT",
                        "ONLY"
                    ],
                    answer: 1,
                    explanation: "DISTINCT selects only unique values from a column.",
                    code: `-- Selecting unique values
SELECT DISTINCT country 
FROM customers;`
                },
                {
                    level: 15,
                    module: 'query',
                    question: "Which operator combines multiple conditions?",
                    options: [
                        "AND",
                        "PLUS",
                        "ALSO",
                        "COMBINE"
                    ],
                    answer: 0,
                    explanation: "The AND operator combines multiple conditions in a WHERE clause.",
                    code: `-- Using AND operator
SELECT * FROM orders
WHERE status = 'shipped' 
AND total > 100;`
                },
                
                // Level 16-20: Joins & Relationships
                {
                    level: 16,
                    module: 'joins',
                    question: "What is the purpose of a JOIN in SQL?",
                    options: [
                        "To combine rows from two or more tables",
                        "To add new columns to a table",
                        "To merge databases",
                        "To create relationships between databases"
                    ],
                    answer: 0,
                    explanation: "JOIN combines rows from two or more tables based on a related column.",
                    code: `-- Basic JOIN example
SELECT orders.id, customers.name
FROM orders
JOIN customers ON orders.customer_id = customers.id;`
                },
                {
                    level: 17,
                    module: 'joins',
                    question: "Which JOIN returns all records from the left table?",
                    options: [
                        "INNER JOIN",
                        "LEFT JOIN",
                        "RIGHT JOIN",
                        "FULL JOIN"
                    ],
                    answer: 1,
                    explanation: "LEFT JOIN returns all records from the left table and matched records from the right table.",
                    code: `-- LEFT JOIN example
SELECT employees.name, departments.name
FROM employees
LEFT JOIN departments ON employees.dept_id = departments.id;`
                },
                {
                    level: 18,
                    module: 'joins',
                    question: "What is a foreign key?",
                    options: [
                        "A key that doesn't work",
                        "A unique identifier in a table",
                        "A column that references a primary key in another table",
                        "A backup key for the database"
                    ],
                    answer: 2,
                    explanation: "A foreign key creates a link between tables by referencing the primary key of another table.",
                    code: `-- Creating a foreign key
CREATE TABLE orders (
    id INT PRIMARY KEY,
    customer_id INT,
    order_date DATE,
    FOREIGN KEY (customer_id) REFERENCES customers(id)
);`
                },
                {
                    level: 19,
                    module: 'joins',
                    question: "Which JOIN returns only matching records?",
                    options: [
                        "INNER JOIN",
                        "LEFT JOIN",
                        "RIGHT JOIN",
                        "FULL JOIN"
                    ],
                    answer: 0,
                    explanation: "INNER JOIN returns only records with matching values in both tables.",
                    code: `-- INNER JOIN example
SELECT products.name, categories.name
FROM products
INNER JOIN categories ON products.category_id = categories.id;`
                },
                {
                    level: 20,
                    module: 'joins',
                    question: "What does ON DELETE CASCADE do?",
                    options: [
                        "Deletes the database",
                        "Automatically deletes child records when a parent is deleted",
                        "Cascades table changes",
                        "Deletes duplicate records"
                    ],
                    answer: 1,
                    explanation: "ON DELETE CASCADE automatically deletes dependent records when the referenced record is deleted.",
                    code: `-- Using ON DELETE CASCADE
CREATE TABLE order_items (
    id INT PRIMARY KEY,
    order_id INT,
    product_id INT,
    FOREIGN KEY (order_id) REFERENCES orders(id) ON DELETE CASCADE
);`
                },
                
                // Level 21-25: Advanced Topics
                {
                    level: 21,
                    module: 'advanced',
                    question: "What is an index used for?",
                    options: [
                        "To count records",
                        "To improve query performance",
                        "To create table relationships",
                        "To store backup data"
                    ],
                    answer: 1,
                    explanation: "Indexes speed up data retrieval operations on database tables.",
                    code: `-- Creating an index
CREATE INDEX idx_customer_name 
ON customers (last_name, first_name);`
                },
                {
                    level: 22,
                    module: 'advanced',
                    question: "What does a transaction ensure?",
                    options: [
                        "Data is transferred between databases",
                        "A group of operations succeed or fail together",
                        "Tables are properly formatted",
                        "Database backups are created"
                    ],
                    answer: 1,
                    explanation: "Transactions ensure that a series of operations either all complete successfully or all fail (ACID properties).",
                    code: `-- Transaction example
START TRANSACTION;
UPDATE accounts SET balance = balance - 100 WHERE id = 1;
UPDATE accounts SET balance = balance + 100 WHERE id = 2;
COMMIT;`
                },
                {
                    level: 23,
                    module: 'advanced',
                    question: "Which statement creates a stored procedure?",
                    options: [
                        "CREATE FUNCTION",
                        "CREATE METHOD",
                        "CREATE PROCEDURE",
                        "CREATE ROUTINE"
                    ],
                    answer: 2,
                    explanation: "CREATE PROCEDURE defines a stored procedure that can be executed later.",
                    code: `-- Creating a stored procedure
CREATE PROCEDURE GetEmployee(IN emp_id INT)
BEGIN
    SELECT * FROM employees WHERE id = emp_id;
END;`
                },
                {
                    level: 24,
                    module: 'advanced',
                    question: "What is a view in SQL?",
                    options: [
                        "A graphical representation of data",
                        "A stored query that acts like a virtual table",
                        "A way to preview table changes",
                        "A database visualization tool"
                    ],
                    answer: 1,
                    explanation: "A view is a virtual table based on the result set of a SQL query.",
                    code: `-- Creating a view
CREATE VIEW active_customers AS
SELECT id, name, email 
FROM customers
WHERE status = 'active';`
                },
                {
                    level: 25,
                    module: 'advanced',
                    question: "What does EXPLAIN do?",
                    options: [
                        "Provides documentation for SQL commands",
                        "Describes how MySQL executes a query",
                        "Explains database structure",
                        "Teaches SQL concepts"
                    ],
                    answer: 1,
                    explanation: "EXPLAIN shows how MySQL executes a query, useful for optimization.",
                    code: `-- Using EXPLAIN
EXPLAIN SELECT * FROM orders 
WHERE customer_id = 123;`
                },
                
                // Level 26-30: More Advanced Topics
                {
                    level: 26,
                    module: 'advanced',
                    question: "What is a trigger?",
                    options: [
                        "A command to start a database",
                        "A stored program that executes automatically in response to events",
                        "A security feature",
                        "A way to export data"
                    ],
                    answer: 1,
                    explanation: "Triggers automatically execute in response to INSERT, UPDATE, or DELETE events.",
                    code: `-- Creating a trigger
CREATE TRIGGER update_timestamp
BEFORE UPDATE ON orders
FOR EACH ROW
SET NEW.updated_at = NOW();`
                },
                {
                    level: 27,
                    module: 'advanced',
                    question: "Which function returns the current date?",
                    options: [
                        "CURRENT_DATE()",
                        "TODAY()",
                        "NOW()",
                        "CURDATE()"
                    ],
                    answer: 3,
                    explanation: "CURDATE() returns the current date in YYYY-MM-DD format.",
                    code: `-- Using CURDATE()
SELECT * FROM orders 
WHERE order_date = CURDATE();`
                },
                {
                    level: 28,
                    module: 'advanced',
                    question: "What does the HAVING clause do?",
                    options: [
                        "Filters records before grouping",
                        "Filters groups after GROUP BY",
                        "Specifies search conditions",
                        "Limits the number of returned groups"
                    ],
                    answer: 1,
                    explanation: "HAVING filters groups created by GROUP BY based on specified conditions.",
                    code: `-- Using HAVING
SELECT department, AVG(salary) as avg_salary
FROM employees
GROUP BY department
HAVING avg_salary > 50000;`
                },
                {
                    level: 29,
                    module: 'advanced',
                    question: "What is a subquery?",
                    options: [
                        "A query that runs after the main query",
                        "A query nested inside another query",
                        "A query that summarizes data",
                        "A backup query"
                    ],
                    answer: 1,
                    explanation: "A subquery is a query nested inside a SELECT, INSERT, UPDATE, or DELETE statement.",
                    code: `-- Using a subquery
SELECT name FROM employees
WHERE department_id IN (
    SELECT id FROM departments 
    WHERE location = 'New York'
);`
                },
                {
                    level: 30,
                    module: 'advanced',
                    question: "What is the purpose of the CASE statement?",
                    options: [
                        "To handle errors",
                        "To create conditional logic in queries",
                        "To define cases for stored procedures",
                        "To select different databases"
                    ],
                    answer: 1,
                    explanation: "CASE provides conditional logic similar to if-then-else statements.",
                    code: `-- Using CASE
SELECT name, 
    CASE 
        WHEN salary > 80000 THEN 'High'
        WHEN salary > 50000 THEN 'Medium'
        ELSE 'Low'
    END as salary_level
FROM employees;`
                }
            ];

            // Initialize game
            function initGame() {
                updateGameState();
                renderLevelSelect();
                loadLevel(gameState.currentLevel);
            }

            // Update game state display
            function updateGameState() {
                currentLevelElement.textContent = gameState.currentLevel;
                xpValueElement.textContent = gameState.xp;
                scoreValueElement.textContent = gameState.score;
                
                // Update progress
                const progress = (gameState.currentLevel / gameState.maxLevel) * 100;
                mainProgress.style.width = `${progress}%`;
                progressPercentage.textContent = `${Math.round(progress)}%`;
                
                // Update module info
                const moduleInfo = getModuleInfo(gameState.currentModule);
                moduleTitle.textContent = moduleInfo.title;
                moduleDescription.textContent = moduleInfo.description;
                
                // Update module progress bars
                updateModuleProgressBars();
            }
            
            // Update module progress bars
            function updateModuleProgressBars() {
                const modules = ['basics', 'crud', 'query', 'joins', 'advanced'];
                modules.forEach(module => {
                    const moduleQuestions = questions.filter(q => q.module === module);
                    const completedQuestions = moduleQuestions.filter(q => gameState.completedLevels.has(q.level));
                    const progress = (completedQuestions.length / moduleQuestions.length) * 100;
                    document.getElementById(`${module}-progress`).style.width = `${progress}%`;
                });
            }

            // Get module information
            function getModuleInfo(module) {
                const modules = {
                    basics: {
                        title: "SQL Basics",
                        description: "Learn fundamental concepts of SQL including databases, tables, and basic queries."
                    },
                    crud: {
                        title: "CRUD Operations",
                        description: "Master Create, Read, Update, and Delete operations in SQL."
                    },
                    query: {
                        title: "Querying Data",
                        description: "Learn how to query and filter data with various SQL clauses and functions."
                    },
                    joins: {
                        title: "Joins & Relationships",
                        description: "Understand how to combine data from multiple tables using different types of joins."
                    },
                    advanced: {
                        title: "Advanced Topics",
                        description: "Explore advanced SQL features like transactions, stored procedures, and optimization."
                    }
                };
                return modules[module];
            }

            // Render level select
            function renderLevelSelect() {
                levelContainer.innerHTML = '';
                for (let i = 1; i <= gameState.maxLevel; i++) {
                    const levelDiv = document.createElement('div');
                    levelDiv.className = 'level';
                    
                    if (gameState.completedLevels.has(i)) {
                        levelDiv.classList.add('completed');
                    } else if (i === gameState.currentLevel) {
                        levelDiv.classList.add('current');
                    } else {
                        levelDiv.classList.add('locked');
                    }
                    
                    levelDiv.textContent = i;
                    levelDiv.addEventListener('click', () => {
                        if (gameState.completedLevels.has(i) || i === gameState.currentLevel) {
                            gameState.currentLevel = i;
                            loadLevel(i);
                            renderLevelSelect();
                        }
                    });
                    levelContainer.appendChild(levelDiv);
                }
            }

            // Load a level
            function loadLevel(level) {
                const question = questions.find(q => q.level === level);
                if (!question) return;
                
                gameState.currentModule = question.module;
                updateGameState();
                
                quizContainer.innerHTML = `
                    <div class="challenge-container">
                        <div class="challenge-title">
                            <i class="fas fa-puzzle-piece"></i>
                            Level ${level} Challenge
                        </div>
                        <div class="challenge-description">
                            ${question.question}
                        </div>
                        
                        <div class="options">
                            ${question.options.map((opt, i) => `
                                <div class="option" data-answer="${i}">${opt}</div>
                            `).join('')}
                        </div>
                        
                        <div class="code-editor">
                            <div class="code-header">
                                <span>SQL Example</span>
                                <span><i class="fas fa-code"></i> SQL</span>
                            </div>
                            <div class="code-content">${highlightCode(question.code)}</div>
                        </div>
                        
                        <div class="feedback" id="feedback">
                            <div class="feedback-title">
                                <i class="fas fa-info-circle"></i>
                                Explanation
                            </div>
                            <div class="feedback-content">
                                ${question.explanation}
                            </div>
                        </div>
                    </div>
                `;
                
                // Initially hide feedback
                document.getElementById('feedback').style.display = 'none';
                
                // Add event listeners to options
                document.querySelectorAll('.option').forEach(btn => {
                    btn.addEventListener('click', function() {
                        checkAnswer(parseInt(this.dataset.answer), question.answer, question);
                    });
                });
            }

            // Simple SQL code highlighter
            function highlightCode(code) {
                return code
                    .replace(/(SELECT|FROM|WHERE|JOIN|ON|GROUP BY|ORDER BY|INSERT INTO|VALUES|UPDATE|SET|DELETE|CREATE TABLE|ALTER TABLE|ADD COLUMN|TRUNCATE|DROP|UNION|HAVING|CASE|WHEN|THEN|ELSE|END|EXPLAIN|START TRANSACTION|COMMIT|ROLLBACK|CREATE VIEW|CREATE PROCEDURE|CREATE TRIGGER|CREATE INDEX|INTO|TABLE|COLUMN)\b/gi, '<span class="code-keyword">$1</span>')
                    .replace(/(\b(?:INT|VARCHAR|DATE|DECIMAL|PRIMARY KEY|FOREIGN KEY|REFERENCES|INDEX|PROCEDURE|TRIGGER|BEFORE|AFTER|FOR EACH ROW|SET)\b)/gi, '<span class="code-function">$1</span>')
                    .replace(/(\b(?:AND|OR|NOT|IN|BETWEEN|LIKE|IS NULL|IS NOT NULL|AS|DISTINCT|ASC|DESC|LIMIT)\b)/gi, '<span class="code-operator">$1</span>')
                    .replace(/(\b(?:AVG|COUNT|SUM|MIN|MAX|CURDATE|NOW|CASE)\b)(?=\()/gi, '<span class="code-function">$1</span>')
                    .replace(/(".*?"|'.*?')/g, '<span class="code-string">$1</span>')
                    .replace(/--.*/g, '<span class="code-comment">$&</span>')
                    .replace(/\b(\d+)\b/g, '<span class="code-number">$1</span>');
            }

            // Check answer
            function checkAnswer(selected, correct, question) {
                const options = document.querySelectorAll('.option');
                const feedback = document.getElementById('feedback');
                
                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                    if (parseInt(opt.dataset.answer) === correct) {
                        opt.classList.add('correct');
                    } else if (parseInt(opt.dataset.answer) === selected && selected !== correct) {
                        opt.classList.add('incorrect');
                    }
                });
                
                feedback.style.display = 'block';
                feedback.classList.add(selected === correct ? 'correct' : 'incorrect');
                
                // Update game state
                if (selected === correct) {
                    gameState.score += 10;
                    gameState.xp += 5;
                    gameState.completedLevels.add(gameState.currentLevel);
                    runStatus.textContent = " Correct!";
                    
                    // Create XP animation
                    createXPAnimation();
                    
                    // Move to next level if not at max
                    if (gameState.currentLevel < gameState.maxLevel) {
                        setTimeout(() => {
                            gameState.currentLevel++;
                            loadLevel(gameState.currentLevel);
                            renderLevelSelect();
                        }, 1500);
                    } else {
                        setTimeout(showVictoryScreen, 1500);
                    }
                } else {
                    runStatus.textContent = " Incorrect!";
                }
                
                updateGameState();
            }
            
            // Create XP animation
            function createXPAnimation() {
                const xpAnim = document.createElement('div');
                xpAnim.className = 'xp-animation';
                xpAnim.textContent = '+5 XP';
                xpAnim.style.left = `${Math.random() * 80 + 10}%`;
                document.querySelector('.content-area').appendChild(xpAnim);
                
                setTimeout(() => {
                    xpAnim.remove();
                }, 1500);
            }

            // Show victory screen
            function showVictoryScreen() {
                finalScore.textContent = gameState.score;
                victoryScreen.style.display = 'flex';
            }

            // Restart game
            restartGameBtn.addEventListener('click', function() {
                gameState.currentLevel = 1;
                gameState.score = 0;
                gameState.xp = 0;
                gameState.completedLevels = new Set();
                victoryScreen.style.display = 'none';
                initGame();
            });

            // Initialize the game
            initGame();
        });
    </script>
</body>
</html>