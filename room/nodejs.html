<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Node.js Learning Adventure</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            padding: 20px;
            overflow-x: hidden;
        }
        
        .game-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            height: 700px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background: linear-gradient(to right, #457fca, #5691c8);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 10;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 32px;
            color: #68a063;
        }
        
        .logo h1 {
            font-size: 28px;
            font-weight: 700;
        }
        
        .stats {
            display: flex;
            gap: 25px;
        }
        
        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 100px;
            transition: transform 0.3s ease;
        }
        
        .stat-box:hover {
            transform: translateY(-3px);
        }
        
        .stat-label {
            font-size: 14px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 700;
            margin-top: 5px;
        }
        
        main {
            display: flex;
            flex: 1;
            overflow: hidden;
        }
        
        .sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            padding: 25px 0;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }
        
        .module {
            padding: 15px 25px;
            border-left: 5px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .module:hover {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .module.active {
            border-left: 5px solid #68a063;
            background: rgba(255, 255, 255, 0.15);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(104, 160, 99, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(104, 160, 99, 0); }
            100% { box-shadow: 0 0 0 0 rgba(104, 160, 99, 0); }
        }
        
        .module i {
            font-size: 20px;
            color: #68a063;
        }
        
        .module h3 {
            font-size: 18px;
            font-weight: 600;
        }
        
        .module-progress {
            height: 5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 10px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: #2ecc71;
            width: 0%;
            transition: width 0.5s ease;
        }
        
        .content-area {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        
        .module-title {
            color: #2c3e50;
            font-size: 32px;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 3px solid #68a063;
        }
        
        .module-description {
            color: #34495e;
            font-size: 18px;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .challenge-container {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .challenge-title {
            font-size: 24px;
            color: #68a063;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .challenge-description {
            color: #2c3e50;
            font-size: 17px;
            line-height: 1.6;
            margin-bottom: 25px;
        }
        
        .code-editor {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            font-family: 'Courier New', monospace;
            position: relative;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            color: #ccc;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .code-content {
            color: #d4d4d4;
            font-size: 16px;
            line-height: 1.5;
            white-space: pre-wrap;
            min-height: 150px;
            padding: 10px;
            background: #252526;
            border-radius: 5px;
            overflow: auto;
        }
        
        .code-keyword {
            color: #569cd6;
        }
        
        .code-function {
            color: #dcdcaa;
        }
        
        .code-string {
            color: #ce9178;
        }
        
        .code-comment {
            color: #6a9955;
        }
        
        .code-number {
            color: #b5cea8;
        }
        
        .code-operator {
            color: #d4d4d4;
        }
        
        .options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .option {
            background: #e3f2fd;
            border: 2px solid #bbdefb;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .option:hover {
            background: #bbdefb;
            transform: translateY(-3px);
        }
        
        .option.correct {
            background: #c8e6c9;
            border-color: #a5d6a7;
            animation: correctPulse 0.5s;
        }
        
        @keyframes correctPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .option.incorrect {
            background: #ffcdd2;
            border-color: #ef9a9a;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            padding: 14px 30px;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #68a063, #4a934a);
            color: white;
            box-shadow: 0 5px 15px rgba(104, 160, 99, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(104, 160, 99, 0.6);
        }
        
        .btn-secondary {
            background: #ecf0f1;
            color: #7f8c8d;
        }
        
        .btn-secondary:hover {
            background: #dfe6e9;
        }
        
        .progress-container {
            margin-top: auto;
            background: #e3f2fd;
            border-radius: 10px;
            padding: 15px;
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .progress-bar-main {
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }
        
        .progress-main {
            height: 100%;
            background: linear-gradient(to right, #2ecc71, #27ae60);
            width: 0%;
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .feedback {
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .feedback.correct {
            background: #e8f5e9;
            border: 2px solid #c8e6c9;
            color: #2e7d32;
        }
        
        .feedback.incorrect {
            background: #ffebee;
            border: 2px solid #ffcdd2;
            color: #c62828;
        }
        
        .feedback-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .feedback-content {
            font-size: 16px;
            line-height: 1.5;
        }
        
        .level-container {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .level {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .level.locked {
            background: #e0e0e0;
            color: #9e9e9e;
            cursor: not-allowed;
        }
        
        .level.unlocked {
            background: #81c784;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .level.current {
            background: #ffd54f;
            color: #333;
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(255, 213, 79, 0.7);
            animation: pulse 2s infinite;
        }
        
        .level.completed {
            background: #4caf50;
            color: white;
        }
        
        .level-select-title {
            font-size: 24px;
            color: #2c3e50;
            margin: 20px 0 15px;
        }
        
        .victory-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .victory-content {
            text-align: center;
            max-width: 600px;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .trophy {
            font-size: 100px;
            color: #ffd700;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(0,0,0,0.2);
            animation: spin 1s ease;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg) scale(0.5); opacity: 0; }
            100% { transform: rotate(360deg) scale(1); opacity: 1; }
        }
        
        .badges-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .badge {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: linear-gradient(135deg, #68a063, #9b59b6);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            animation: float 3s ease-in-out infinite;
        }
        
        .badge:nth-child(2) {
            animation-delay: 0.5s;
            background: linear-gradient(135deg, #2ecc71, #68a063);
        }
        
        .badge:nth-child(3) {
            animation-delay: 1s;
            background: linear-gradient(135deg, #e74c3c, #e67e22);
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .console-output {
            background: #1e1e1e;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            color: #d4d4d4;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            display: none;
        }
        
        .console-header {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .run-btn {
            background: #2ecc71;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .run-btn:hover {
            background: #27ae60;
            transform: translateY(-2px);
        }
        
        .achievements-bar {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .achievement {
            background: #f1c40f;
            color: #2c3e50;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .xp-animation {
            position: absolute;
            font-size: 20px;
            font-weight: bold;
            color: #f1c40f;
            animation: xpFloat 1.5s ease-out;
            pointer-events: none;
            z-index: 200;
        }
        
        @keyframes xpFloat {
            0% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-50px); opacity: 0; }
        }
        
        @media (max-width: 768px) {
            main {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                padding: 15px;
            }
            
            .options {
                grid-template-columns: 1fr;
            }
            
            .stats {
                gap: 10px;
            }
            
            .stat-box {
                min-width: 80px;
                padding: 6px 10px;
            }
            
            .level {
                width: 40px;
                height: 40px;
                font-size: 14px;
            }
            
            .game-container {
                height: auto;
                min-height: 100vh;
            }
            
            .badges-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <header>
            <div class="logo">
                <i class="fab fa-node-js"></i>
                <h1>Node.js Learning Adventure</h1>
            </div>
            <div class="stats">
                <div class="stat-box">
                    <div class="stat-label">Level</div>
                    <div class="stat-value" id="currentLevel">1</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">XP</div>
                    <div class="stat-value" id="xpValue">0</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Score</div>
                    <div class="stat-value" id="scoreValue">0</div>
                </div>
            </div>
        </header>
        
        <main>
            <div class="sidebar">
                <div class="module active" data-module="basics">
                    <i class="fas fa-vial"></i>
                    <div>
                        <h3>Node.js Basics</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="basics-progress" style="width: 20%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="modules">
                    <i class="fas fa-cubes"></i>
                    <div>
                        <h3>Modules & NPM</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="modules-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="server">
                    <i class="fas fa-server"></i>
                    <div>
                        <h3>Server Creation</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="server-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="express">
                    <i class="fas fa-bolt"></i>
                    <div>
                        <h3>Express.js</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="express-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
                <div class="module" data-module="database">
                    <i class="fas fa-database"></i>
                    <div>
                        <h3>Database</h3>
                        <div class="module-progress">
                            <div class="progress-bar" id="database-progress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="content-area">
                <h2 class="module-title" id="moduleTitle">Node.js Basics</h2>
                <p class="module-description" id="moduleDescription">
                    Learn the fundamental building blocks of Node.js programming including modules, event loop, and basic server creation.
                </p>
                
                <div class="level-select-title">Select Level</div>
                <div class="level-container" id="levelContainer">
                    <!-- Levels will be dynamically generated -->
                </div>
                
                <div class="achievements-bar">
                    <div class="achievement">
                        <i class="fas fa-star"></i> First Steps
                    </div>
                    <div class="achievement">
                        <i class="fas fa-bolt"></i> Quick Learner
                    </div>
                </div>
                
                <div id="quizContainer">
                    <!-- Quiz content will be dynamically generated -->
                </div>
                
                <div class="console-output" id="consoleOutput">
                    <div class="console-header">
                        <span>Program Output</span>
                        <span>Status: <span id="runStatus">Ready</span></span>
                    </div>
                    <pre id="outputContent"></pre>
                </div>
                
                <div class="progress-container">
                    <div class="progress-header">
                        <span>Course Progress</span>
                        <span id="progressPercentage">5% Complete</span>
                    </div>
                    <div class="progress-bar-main">
                        <div class="progress-main" id="mainProgress" style="width: 5%"></div>
                    </div>
                </div>
            </div>
            
            <div class="victory-screen" id="victoryScreen">
                <div class="victory-content">
                    <div class="trophy">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h1>Congratulations!</h1>
                    <p class="module-description">You've completed all 30 levels of the Node.js Learning Adventure!</p>
                    
                    <div class="badges-container">
                        <div class="badge">
                            <i class="fas fa-medal"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-crown"></i>
                        </div>
                        <div class="badge">
                            <i class="fas fa-gem"></i>
                        </div>
                    </div>
                    
                    <p class="stat-value" style="font-size: 32px; margin: 20px 0;">Final Score: <span id="finalScore">0</span></p>
                    <button class="btn btn-primary" id="restartGameBtn">
                        <i class="fas fa-redo"></i> Play Again
                    </button>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Game state
            const gameState = {
                currentLevel: 1,
                maxLevel: 30,
                score: 0,
                xp: 0,
                currentModule: 'basics',
                completedLevels: new Set(),
                achievements: new Set(['First Steps', 'Quick Learner'])
            };
            
            // DOM elements
            const levelContainer = document.getElementById('levelContainer');
            const quizContainer = document.getElementById('quizContainer');
            const moduleTitle = document.getElementById('moduleTitle');
            const moduleDescription = document.getElementById('moduleDescription');
            const currentLevelElement = document.getElementById('currentLevel');
            const xpValueElement = document.getElementById('xpValue');
            const scoreValueElement = document.getElementById('scoreValue');
            const mainProgress = document.getElementById('mainProgress');
            const progressPercentage = document.getElementById('progressPercentage');
            const victoryScreen = document.getElementById('victoryScreen');
            const finalScore = document.getElementById('finalScore');
            const restartGameBtn = document.getElementById('restartGameBtn');
            const consoleOutput = document.getElementById('consoleOutput');
            const outputContent = document.getElementById('outputContent');
            const runStatus = document.getElementById('runStatus');
            
            // Questions database
            const questions = [
                // Level 1-5: Node.js Basics
                {
                    level: 1,
                    module: 'basics',
                    question: "How do you run a Node.js file named 'app.js' from the command line?",
                    options: [
                        "node app.js",
                        "run app.js",
                        "node start app.js",
                        "npm app.js"
                    ],
                    answer: 0,
                    explanation: "The 'node' command is used to execute Node.js files, followed by the filename.",
                    code: `<span class="code-comment">// In your terminal:</span>
<span class="code-comment">// node app.js</span>`
                },
                {
                    level: 2,
                    module: 'basics',
                    question: "What is the correct way to import the built-in 'fs' module in Node.js?",
                    options: [
                        "import fs from 'fs'",
                        "const fs = require('fs');",
                        "include fs;",
                        "load('fs');"
                    ],
                    answer: 1,
                    explanation: "Node.js uses CommonJS modules with require() for importing modules.",
                    code: `<span class="code-comment">// Importing the fs module</span>
<span class="code-keyword">const</span> fs = <span class="code-keyword">require</span>(<span class="code-string">'fs'</span>);`
                },
                {
                    level: 3,
                    module: 'basics',
                    question: "Which global object in Node.js provides information about the current file?",
                    options: [
                        "global",
                        "process",
                        "__filename",
                        "window"
                    ],
                    answer: 2,
                    explanation: "__filename gives the absolute path of the current module file.",
                    code: `<span class="code-comment">// Using __filename</span>
<span class="code-keyword">console</span>.log(<span class="code-string">"Current file:"</span>, __filename);`
                },
                {
                    level: 4,
                    module: 'basics',
                    question: "What method is used to print to the console in Node.js?",
                    options: [
                        "print()",
                        "console.log()",
                        "log()",
                        "All of the above"
                    ],
                    answer: 1,
                    explanation: "console.log() is the standard method for printing to the console in Node.js.",
                    code: `<span class="code-comment">// Printing to console</span>
<span class="code-keyword">console</span>.log(<span class="code-string">"Hello, Node.js!"</span>);`
                },
                {
                    level: 5,
                    module: 'basics',
                    question: "Which function is used to schedule the execution of a callback in Node.js?",
                    options: [
                        "setImmediate()",
                        "setTimeout()",
                        "setInterval()",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "Node.js provides several timer functions including setTimeout(), setImmediate(), and setInterval().",
                    code: `<span class="code-comment">// Using setTimeout</span>
<span class="code-keyword">setTimeout</span>(() => {
    <span class="code-keyword">console</span>.log(<span class="code-string">"This runs after 1 second"</span>);
}, 1000);`
                },
                
                // Level 6-10: Modules & NPM
                {
                    level: 6,
                    module: 'modules',
                    question: "What command initializes a new Node.js project and creates a package.json file?",
                    options: [
                        "npm init",
                        "node init",
                        "npm start",
                        "npm create"
                    ],
                    answer: 0,
                    explanation: "npm init creates a new package.json file for your project.",
                    code: `<span class="code-comment">// In your terminal:</span>
<span class="code-comment">// npm init</span>`
                },
                {
                    level: 7,
                    module: 'modules',
                    question: "How do you install a package named 'express' locally in your project?",
                    options: [
                        "npm install -g express",
                        "npm add express",
                        "npm install express",
                        "node install express"
                    ],
                    answer: 2,
                    explanation: "npm install <package> installs a package locally in your project's node_modules folder.",
                    code: `<span class="code-comment">// In your terminal:</span>
<span class="code-comment">// npm install express</span>`
                },
                {
                    level: 8,
                    module: 'modules',
                    question: "What is the correct way to export multiple functions from a module?",
                    options: [
                        "module.exports = { func1, func2 };",
                        "export { func1, func2 };",
                        "exports = { func1, func2 };",
                        "Both 1 and 3"
                    ],
                    answer: 0,
                    explanation: "module.exports is the standard way to export multiple items in Node.js.",
                    code: `<span class="code-comment">// In myModule.js</span>
<span class="code-keyword">function</span> func1() { <span class="code-comment">/* ... */</span> }
<span class="code-keyword">function</span> func2() { <span class="code-comment">/* ... */</span> }

<span class="code-keyword">module</span>.exports = { func1, func2 };`
                },
                {
                    level: 9,
                    module: 'modules',
                    question: "What does the 'require.main === module' check do?",
                    options: [
                        "Checks if the module is the main entry point",
                        "Verifies the module is required correctly",
                        "Ensures the module is installed",
                        "None of the above"
                    ],
                    answer: 0,
                    explanation: "This check determines if the current module is being run directly (not required by another module).",
                    code: `<span class="code-comment">// Checking if module is main</span>
<span class="code-keyword">if</span> (<span class="code-keyword">require</span>.main === <span class="code-keyword">module</span>) {
    <span class="code-comment">// Code that runs only when executed directly</span>
}`
                },
                {
                    level: 10,
                    module: 'modules',
                    question: "What is the purpose of the 'node_modules' folder?",
                    options: [
                        "Stores Node.js core modules",
                        "Contains locally installed packages",
                        "Holds global Node.js configurations",
                        "Stores temporary files"
                    ],
                    answer: 1,
                    explanation: "The node_modules folder contains all the packages installed locally for a project.",
                    code: `<span class="code-comment">// Typical project structure</span>
<span class="code-comment">// project/
// ├── node_modules/  &lt;-- installed packages
// ├── package.json
// └── index.js</span>`
                },
                
                // Level 11-15: Server Creation
                {
                    level: 11,
                    module: 'server',
                    question: "Which built-in module is used to create an HTTP server in Node.js?",
                    options: [
                        "http",
                        "server",
                        "net",
                        "web"
                    ],
                    answer: 0,
                    explanation: "The 'http' module provides functionality for creating HTTP servers and clients.",
                    code: `<span class="code-comment">// Creating a basic HTTP server</span>
<span class="code-keyword">const</span> http = <span class="code-keyword">require</span>(<span class="code-string">'http'</span>);

<span class="code-keyword">const</span> server = http.createServer((req, res) => {
    res.end(<span class="code-string">'Hello World'</span>);
});

server.listen(3000);`
                },
                {
                    level: 12,
                    module: 'server',
                    question: "How do you read the URL path in an HTTP server request?",
                    options: [
                        "req.url",
                        "req.path",
                        "req.originalUrl",
                        "req.location"
                    ],
                    answer: 0,
                    explanation: "The req.url property contains the URL path of the request.",
                    code: `<span class="code-comment">// Reading the URL path</span>
<span class="code-keyword">const</span> server = http.createServer((req, res) => {
    <span class="code-keyword">console</span>.log(<span class="code-string">"Request URL:"</span>, req.url);
    res.end(<span class="code-string">'Hello'</span>);
});`
                },
                {
                    level: 13,
                    module: 'server',
                    question: "What method is used to send a response in Node.js HTTP server?",
                    options: [
                        "res.send()",
                        "res.end()",
                        "res.write()",
                        "Both 2 and 3"
                    ],
                    answer: 3,
                    explanation: "res.write() writes data to the response, and res.end() signals the end of the response.",
                    code: `<span class="code-comment">// Sending a response</span>
<span class="code-keyword">const</span> server = http.createServer((req, res) => {
    res.write(<span class="code-string">'Hello'</span>);
    res.end(<span class="code-string">' World'</span>);
});`
                },
                {
                    level: 14,
                    module: 'server',
                    question: "How do you set the status code of an HTTP response?",
                    options: [
                        "res.code(404)",
                        "res.status = 404",
                        "res.statusCode = 404",
                        "res.setStatus(404)"
                    ],
                    answer: 2,
                    explanation: "res.statusCode property sets the HTTP status code for the response.",
                    code: `<span class="code-comment">// Setting status code</span>
<span class="code-keyword">const</span> server = http.createServer((req, res) => {
    res.statusCode = 404;
    res.end(<span class="code-string">'Not Found'</span>);
});`
                },
                
                {
                    level: 15,
                    module: 'server',
                    question: "What is the purpose of the 'request' event in an HTTP server?",
                    options: [
                        "Emitted when a request is received",
                        "Emitted when the server starts",
                        "Emitted when a response is sent",
                        "Emitted when an error occurs"
                    ],
                    answer: 0,
                    explanation: "The 'request' event is emitted each time there's a request to the server.",
                    code: `<span class="code-comment">// Using the request event</span>
<span class="code-keyword">const</span> server = http.createServer();
server.on(<span class="code-string">'request'</span>, (req, res) => {
    res.end(<span class="code-string">'Hello'</span>);
});`
                },
                
                // Level 16-20: Express.js
                {
                    level: 16,
                    module: 'express',
                    question: "How do you create an Express application?",
                    options: [
                        "const app = new Express();",
                        "const app = express.create();",
                        "const app = express();",
                        "const app = require('express')();"
                    ],
                    answer: 2,
                    explanation: "The express() function creates an Express application.",
                    code: `<span class="code-comment">// Creating an Express app</span>
<span class="code-keyword">const</span> express = <span class="code-keyword">require</span>(<span class="code-string">'express'</span>);
<span class="code-keyword">const</span> app = express();`
                },
                {
                    level: 17,
                    module: 'express',
                    question: "What method is used to define a route for GET requests in Express?",
                    options: [
                        "app.get()",
                        "app.route()",
                        "app.use()",
                        "app.GET()"
                    ],
                    answer: 0,
                    explanation: "app.get() defines a route handler for GET requests.",
                    code: `<span class="code-comment">// Defining a GET route</span>
app.get(<span class="code-string">'/'</span>, (req, res) => {
    res.send(<span class="code-string">'Hello Express'</span>);
});`
                },
                {
                    level: 18,
                    module: 'express',
                    question: "How do you access route parameters in Express?",
                    options: [
                        "req.query",
                        "req.body",
                        "req.params",
                        "req.arguments"
                    ],
                    answer: 2,
                    explanation: "Route parameters are available in req.params object.",
                    code: `<span class="code-comment">// Accessing route parameters</span>
app.get(<span class="code-string">'/users/:id'</span>, (req, res) => {
    <span class="code-keyword">const</span> userId = req.params.id;
    res.send(<span class="code-string">\`User \${userId}\`</span>);
});`
                },
                {
                    level: 19,
                    module: 'express',
                    question: "What middleware is needed to parse JSON request bodies?",
                    options: [
                        "express.json()",
                        "bodyParser.json()",
                        "express.urlencoded()",
                        "Both 1 and 2"
                    ],
                    answer: 3,
                    explanation: "Both express.json() and bodyParser.json() can parse JSON bodies.",
                    code: `<span class="code-comment">// Using JSON body parser</span>
<span class="code-keyword">const</span> express = <span class="code-keyword">require</span>(<span class="code-string">'express'</span>);
<span class="code-keyword">const</span> app = express();

app.use(express.json());`
                },
                {
                    level: 20,
                    module: 'express',
                    question: "How do you serve static files in Express?",
                    options: [
                        "app.static()",
                        "express.static()",
                        "app.useStatic()",
                        "express.serve()"
                    ],
                    answer: 1,
                    explanation: "express.static() middleware serves static files.",
                    code: `<span class="code-comment">// Serving static files</span>
app.use(express.static(<span class="code-string">'public'</span>));`
                },
                
                // Level 21-25: Database
                {
                    level: 21,
                    module: 'database',
                    question: "Which method is used to connect to MongoDB using Mongoose?",
                    options: [
                        "mongoose.connect()",
                        "mongoose.createConnection()",
                        "mongoose.setup()",
                        "mongoose.open()"
                    ],
                    answer: 0,
                    explanation: "mongoose.connect() establishes a connection to MongoDB.",
                    code: `<span class="code-comment">// Connecting to MongoDB</span>
<span class="code-keyword">const</span> mongoose = <span class="code-keyword">require</span>(<span class="code-string">'mongoose'</span>);
mongoose.connect(<span class="code-string">'mongodb://localhost/mydb'</span>);`
                },
                {
                    level: 22,
                    module: 'database',
                    question: "How do you define a Mongoose schema?",
                    options: [
                        "new mongoose.Schema({})",
                        "mongoose.defineSchema({})",
                        "mongoose.createSchema({})",
                        "mongoose.schema({})"
                    ],
                    answer: 0,
                    explanation: "new mongoose.Schema() creates a new schema definition.",
                    code: `<span class="code-comment">// Defining a schema</span>
<span class="code-keyword">const</span> userSchema = <span class="code-keyword">new</span> mongoose.Schema({
    name: String,
    age: Number
});`
                },
                {
                    level: 23,
                    module: 'database',
                    question: "What method saves a document to the database in Mongoose?",
                    options: [
                        "document.save()",
                        "document.create()",
                        "document.insert()",
                        "document.store()"
                    ],
                    answer: 0,
                    explanation: "document.save() persists the document to the database.",
                    code: `<span class="code-comment">// Saving a document</span>
<span class="code-keyword">const</span> user = <span class="code-keyword">new</span> User({ name: <span class="code-string">'Alice'</span> });
user.save();`
                },
                {
                    level: 24,
                    module: 'database',
                    question: "How do you perform a find query in Mongoose?",
                    options: [
                        "Model.search()",
                        "Model.query()",
                        "Model.find()",
                        "Model.get()"
                    ],
                    answer: 2,
                    explanation: "Model.find() queries the database for documents.",
                    code: `<span class="code-comment">// Finding documents</span>
User.find({ age: { $gt: 18 } }, (err, users) => {
    <span class="code-comment">// users contains matching documents</span>
});`
                },
                {
                    level: 25,
                    module: 'database',
                    question: "What is the purpose of population in Mongoose?",
                    options: [
                        "To fill referenced documents",
                        "To increase performance",
                        "To validate data",
                        "To encrypt data"
                    ],
                    answer: 0,
                    explanation: "Population automatically replaces specified paths with documents from other collections.",
                    code: `<span class="code-comment">// Population example</span>
User.findOne({ name: <span class="code-string">'Alice'</span> })
    .populate(<span class="code-string">'posts'</span>)
    .exec((err, user) => {
        <span class="code-comment">// user.posts will contain actual post documents</span>
    });`
                },
                
                // Level 26-30: Advanced Topics
                {
                    level: 26,
                    module: 'database',
                    question: "What is middleware in the context of Express.js?",
                    options: [
                        "Functions that execute during request processing",
                        "Database connection handlers",
                        "Template rendering engines",
                        "Error handling utilities"
                    ],
                    answer: 0,
                    explanation: "Middleware functions have access to request/response objects and can perform operations.",
                    code: `<span class="code-comment">// Example middleware</span>
app.use((req, res, next) => {
    <span class="code-keyword">console</span>.log(<span class="code-string">'Request received'</span>);
    next();
});`
                },
                {
                    level: 27,
                    module: 'database',
                    question: "How do you handle errors in Express route handlers?",
                    options: [
                        "Using try/catch blocks",
                        "Passing to next()",
                        "Using error-handling middleware",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "Express provides multiple ways to handle errors including all these methods.",
                    code: `<span class="code-comment">// Error handling example</span>
app.get(<span class="code-string">'/'</span>, (req, res, next) => {
    <span class="code-keyword">try</span> {
        <span class="code-comment">// Code that might throw</span>
    } <span class="code-keyword">catch</span> (err) {
        next(err);
    }
});

<span class="code-comment">// Error handling middleware</span>
app.use((err, req, res, next) => {
    res.status(500).send(<span class="code-string">'Something broke!'</span>);
});`
                },
                {
                    level: 28,
                    module: 'database',
                    question: "What is the purpose of process.env in Node.js?",
                    options: [
                        "Access environment variables",
                        "Get process information",
                        "Access command line arguments",
                        "Manage child processes"
                    ],
                    answer: 0,
                    explanation: "process.env gives access to environment variables.",
                    code: `<span class="code-comment">// Accessing environment variables</span>
<span class="code-keyword">const</span> port = process.env.PORT || 3000;
app.listen(port);`
                },
                {
                    level: 29,
                    module: 'database',
                    question: "What package is commonly used for environment variables in Node.js?",
                    options: [
                        "env",
                        "dotenv",
                        "config",
                        "process-env"
                    ],
                    answer: 1,
                    explanation: "dotenv loads environment variables from a .env file.",
                    code: `<span class="code-comment">// Using dotenv</span>
<span class="code-keyword">require</span>(<span class="code-string">'dotenv'</span>).config();
<span class="code-comment">// Now process.env has variables from .env</span>`
                },
                {
                    level: 30,
                    module: 'database',
                    question: "What is the EventEmitter class used for in Node.js?",
                    options: [
                        "Creating event-driven architectures",
                        "Handling HTTP events",
                        "Managing file system events",
                        "All of the above"
                    ],
                    answer: 3,
                    explanation: "EventEmitter is the base class for many Node.js objects that emit events.",
                    code: `<span class="code-comment">// Using EventEmitter</span>
<span class="code-keyword">const</span> EventEmitter = <span class="code-keyword">require</span>(<span class="code-string">'events'</span>);
<span class="code-keyword">class</span> MyEmitter <span class="code-keyword">extends</span> EventEmitter {}
<span class="code-keyword">const</span> myEmitter = <span class="code-keyword">new</span> MyEmitter();

myEmitter.on(<span class="code-string">'event'</span>, () => {
    <span class="code-keyword">console</span>.log(<span class="code-string">'an event occurred!'</span>);
});

myEmitter.emit(<span class="code-string">'event'</span>);`
                }
            ];  
                
            
            
            // Module information
            const modules = {
                basics: {
                    title: "Node.js Basics",
                    description: "Learn the fundamental building blocks of Node.js programming including modules, event loop, and basic server creation.",
                    levels: 5
                },
                modules: {
                    title: "Modules & NPM",
                    description: "Understand Node.js module system, package management with NPM, and creating reusable modules.",
                    levels: 5
                },
                server: {
                    title: "Server Creation",
                    description: "Learn to create HTTP servers, handle requests and responses, and build basic web applications.",
                    levels: 5
                },
                express: {
                    title: "Express.js",
                    description: "Master the Express framework for building robust web applications and RESTful APIs.",
                    levels: 5
                },
                database: {
                    title: "Database",
                    description: "Connect to databases, perform CRUD operations, and work with MongoDB using Mongoose.",
                    levels: 10
                }
            };
            
            // Initialize the game
            function initGame() {
                renderLevels();
                loadLevel(gameState.currentLevel);
                updateStats();
                updateModuleProgress();
                updateMainProgress();
                
                // Set up event listeners
                document.querySelectorAll('.module').forEach(module => {
                    module.addEventListener('click', () => switchModule(module.dataset.module));
                });
            }
            
            // Render level selection buttons
            function renderLevels() {
                levelContainer.innerHTML = '';
                
                for (let i = 1; i <= gameState.maxLevel; i++) {
                    const level = document.createElement('div');
                    level.className = 'level';
                    level.textContent = i;
                    level.dataset.level = i;
                    
                    if (i === gameState.currentLevel) {
                        level.classList.add('current');
                    } else if (gameState.completedLevels.has(i)) {
                        level.classList.add('completed');
                    } else if (i > gameState.currentLevel) {
                        level.classList.add('locked');
                    } else {
                        level.classList.add('unlocked');
                    }
                    
                    if (i <= gameState.currentLevel) {
                        level.addEventListener('click', () => {
                            if (i !== gameState.currentLevel) {
                                gameState.currentLevel = i;
                                loadLevel(i);
                                renderLevels();
                            }
                        });
                    }
                    
                    levelContainer.appendChild(level);
                }
            }
            
            // Load a specific level
            function loadLevel(levelNum) {
                const levelQuestion = questions.find(q => q.level === levelNum);
                if (!levelQuestion) return;
                
                // Update module info if needed
                if (levelQuestion.module !== gameState.currentModule) {
                    gameState.currentModule = levelQuestion.module;
                    updateModuleInfo();
                }
                
                // Render the question
                renderQuestion(levelQuestion);
            }
            
            // Render a question
            function renderQuestion(question) {
                quizContainer.innerHTML = `
                    <div class="challenge-container">
                        <h3 class="challenge-title">
                            <i class="fas fa-code"></i>
                            Level ${question.level}: ${question.question}
                        </h3>
                        ${question.code ? `<div class="code-editor">
                            <div class="code-header">
                                <span>Code Example</span>
                                <button class="run-btn" id="runCodeBtn">Run Code</button>
                            </div>
                            <div class="code-content">${question.code}</div>
                        </div>` : ''}
                        <p class="challenge-description">Select the correct answer:</p>
                        <div class="options" id="optionsContainer"></div>
                        <div class="feedback" id="feedback"></div>
                        <div class="action-buttons">
                            <button class="btn btn-secondary" id="hintBtn">
                                <i class="fas fa-lightbulb"></i> Hint
                            </button>
                            <button class="btn btn-primary" id="submitBtn">
                                <i class="fas fa-check"></i> Submit
                            </button>
                        </div>
                    </div>
                `;
                
                // Render options
                const optionsContainer = document.getElementById('optionsContainer');
                question.options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = 'option';
                    optionElement.textContent = option;
                    optionElement.dataset.option = index;
                    optionsContainer.appendChild(optionElement);
                });
                
                // Set up event listeners
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        document.querySelectorAll('.option').forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        this.classList.add('selected');
                    });
                });
                
                document.getElementById('runCodeBtn')?.addEventListener('click', () => runCode(question));
                document.getElementById('submitBtn').addEventListener('click', () => checkAnswer(question));
                document.getElementById('hintBtn').addEventListener('click', () => showHint(question));
            }
            
            // Run code example
            function runCode(question) {
                consoleOutput.style.display = 'block';
                outputContent.textContent = '';
                runStatus.textContent = 'Running...';
                
                // Simulate code execution with a delay
                setTimeout(() => {
                    let output = '';
                    
                    // Special handling for different question levels
                    switch(question.level) {
                        case 1:
                            output = 'Hello, Node.js!';
                            break;
                        case 2:
                            output = 'File system module loaded';
                            break;
                        case 3:
                            output = `Current file: /app.js`;
                            break;
                        case 4:
                            output = 'Hello, Node.js!';
                            break;
                        case 5:
                            output = 'This runs after 1 second';
                            break;
                        case 11:
                            output = 'HTTP server running on port 3000';
                            break;
                        case 16:
                            output = 'Express application created';
                            break;
                        case 21:
                            output = 'Connected to MongoDB';
                            break;
                        default:
                            output = 'Code executed successfully';
                    }
                    
                    outputContent.textContent = output;
                    runStatus.textContent = 'Completed';
                    
                    // Add XP for running code
                    addXP(10);
                }, 1000);
            }
            
            // Check the selected answer
            function checkAnswer(question) {
                const selectedOption = document.querySelector('.option.selected');
                if (!selectedOption) {
                    alert('Please select an answer first!');
                    return;
                }
                
                const selectedAnswer = parseInt(selectedOption.dataset.option);
                const feedback = document.getElementById('feedback');
                
                if (selectedAnswer === question.answer) {
                    // Correct answer
                    selectedOption.classList.add('correct');
                    feedback.className = 'feedback correct';
                    feedback.innerHTML = `
                        <div class="feedback-title">
                            <i class="fas fa-check-circle"></i>
                            Correct!
                        </div>
                        <div class="feedback-content">${question.explanation}</div>
                    `;
                    feedback.style.display = 'block';
                    
                    // Update game state
                    if (!gameState.completedLevels.has(question.level)) {
                        gameState.completedLevels.add(question.level);
                        if (question.level === gameState.currentLevel && gameState.currentLevel < gameState.maxLevel) {
                            gameState.currentLevel++;
                        }
                        
                        // Add score and XP
                        gameState.score += question.level * 10;
                        addXP(question.level * 5);
                    }
                    
                    // Update UI
                    updateStats();
                    updateModuleProgress();
                    updateMainProgress();
                    renderLevels();
                    
                    // Check for victory
                    if (gameState.completedLevels.size === gameState.maxLevel) {
                        showVictoryScreen();
                    } else if (selectedAnswer === question.answer) {
                        // Load next level after a delay if correct
                        setTimeout(() => {
                            if (gameState.currentLevel <= gameState.maxLevel) {
                                loadLevel(gameState.currentLevel);
                            }
                        }, 1500);
                    }
                } else {
                    // Incorrect answer
                    selectedOption.classList.add('incorrect');
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = `
                        <div class="feedback-title">
                            <i class="fas fa-times-circle"></i>
                            Incorrect
                        </div>
                        <div class="feedback-content">${question.explanation}</div>
                    `;
                    feedback.style.display = 'block';
                }
            }
            
            // Show hint for the current question
            function showHint(question) {
                const feedback = document.getElementById('feedback');
                feedback.className = 'feedback correct';
                feedback.innerHTML = `
                    <div class="feedback-title">
                        <i class="fas fa-lightbulb"></i>
                        Hint
                    </div>
                    <div class="feedback-content">${question.explanation}</div>
                `;
                feedback.style.display = 'block';
                
                // Deduct some points for using a hint
                gameState.score = Math.max(0, gameState.score - 5);
                updateStats();
            }
            
            // Switch between modules
            function switchModule(moduleName) {
                gameState.currentModule = moduleName;
                
                // Update active module in sidebar
                document.querySelectorAll('.module').forEach(mod => {
                    mod.classList.remove('active');
                });
                document.querySelector(`.module[data-module="${moduleName}"]`).classList.add('active');
                
                // Update module info
                updateModuleInfo();
                
                // Find the first level in this module that's either current or not completed
                const moduleQuestions = questions.filter(q => q.module === moduleName);
                const firstUncompleted = moduleQuestions.find(q => !gameState.completedLevels.has(q.level));
                
                if (firstUncompleted) {
                    gameState.currentLevel = firstUncompleted.level;
                } else {
                    // All levels in this module completed, show the last one
                    gameState.currentLevel = moduleQuestions[moduleQuestions.length - 1].level;
                }
                
                // Update UI
                updateStats();
                renderLevels();
                loadLevel(gameState.currentLevel);
            }
            
            // Update module title and description
            function updateModuleInfo() {
                const module = modules[gameState.currentModule];
                moduleTitle.textContent = module.title;
                moduleDescription.textContent = module.description;
            }
            
            // Update progress for the current module
            function updateModuleProgress() {
                const moduleQuestions = questions.filter(q => q.module === gameState.currentModule);
                const completedInModule = moduleQuestions.filter(q => gameState.completedLevels.has(q.level)).length;
                const progress = (completedInModule / moduleQuestions.length) * 100;
                
                document.getElementById(`${gameState.currentModule}-progress`).style.width = `${progress}%`;
            }
            
            // Update overall course progress
            function updateMainProgress() {
                const progress = (gameState.completedLevels.size / gameState.maxLevel) * 100;
                mainProgress.style.width = `${progress}%`;
                progressPercentage.textContent = `${Math.round(progress)}% Complete`;
            }
            
            // Update stats display
            function updateStats() {
                currentLevelElement.textContent = gameState.currentLevel;
                xpValueElement.textContent = gameState.xp;
                scoreValueElement.textContent = gameState.score;
            }
            
            // Add XP with animation
            function addXP(amount) {
                gameState.xp += amount;
                updateStats();
                
                // Create XP animation
                const xpAnim = document.createElement('div');
                xpAnim.className = 'xp-animation';
                xpAnim.textContent = `+${amount} XP`;
                xpAnim.style.left = `${Math.random() * 80 + 10}%`;
                xpAnim.style.top = `${Math.random() * 50 + 25}%`;
                document.body.appendChild(xpAnim);
                
                // Remove after animation
                setTimeout(() => {
                    xpAnim.remove();
                }, 1500);
            }
            
            // Show victory screen
            function showVictoryScreen() {
                finalScore.textContent = gameState.score;
                victoryScreen.style.display = 'flex';
            }
            
            // Reset the game
            function resetGame() {
                gameState.currentLevel = 1;
                gameState.score = 0;
                gameState.xp = 0;
                gameState.currentModule = 'basics';
                gameState.completedLevels = new Set();
                
                victoryScreen.style.display = 'none';
                initGame();
            }
            
            // Set up the restart button event listener
            restartGameBtn.addEventListener('click', resetGame);
            
            // Start the game
            initGame();
        });
    </script>
</body>
</html>